(this["webpackJsonpreact-cms"]=this["webpackJsonpreact-cms"]||[]).push([[2],{121:function(e,t,a){"use strict";a(1),a(67)},254:function(e,t,a){e.exports=a(288)},259:function(e,t,a){},288:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(10),o=a.n(i),c=a(244),l=(a(140),a(259),a(11)),s=a(53),m=function(e){return r.a.createElement(s.a,{to:"/article"})},u=function(e){var t=e.routes.map((function(e,t){return e.routes&&e.routes.length?r.a.createElement(s.b,{path:e.path,key:e.path,render:function(t){return r.a.createElement(e.component,Object.assign({},t,{title:e.title,routes:e.routes}))}}):r.a.createElement(s.b,{path:e.path,key:e.path,component:e.component})}));return r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:m}),t)},d=function(e){return r.a.createElement(l.a,{store:e.store},r.a.createElement(s.c,{history:e.history},r.a.createElement(u,e)))},p=a(31),h=Object(p.a)();h.listen((function(e){console.log("history is listening: "+e)}));var g=h,f=a(151),v=a(82),b=(a(265),a(7)),y=a(349),E=a(350),O=a(351),j=a(352),x=a(5),A=a(324),I=a(67),w=a(332),S=a(333),N=a(152),k=a(337),D=a(17),C=a(18),T=a(19),R=a(20),L=a(23),F=a(12),B=a(354),H=a(331),_=a(334),W=a(335),z=a(336),P=a(45),q=a.n(P),M=(a(121),a(290)),U=a(305),J=a(357),V=a(291),G=a(325),Y=a(328),X=Object(A.a)((function(e){return{select:{width:"100%"}}})),$=function(e){var t=e.options,a=void 0===t?[]:t,n=e.value,i=e.className,o=e.changeHandler,c=void 0===o?function(e){}:o,l=e.multiple,s=void 0!==l&&l,m=e.itemType,u=void 0===m?"simple":m,d=e.label,p=void 0===d?"":d,h=r.a.useState(n||(s?[]:"")),g=Object(L.a)(h,2),f=g[0],v=g[1],b=X(),y=r.a.useRef(null),E=r.a.useState(0),O=Object(L.a)(E,2),j=O[0],x=O[1];r.a.useEffect((function(){x(y.current.offsetWidth)}),[]);var A="";return"checkbox"===u&&(A=a.map((function(e,t){return r.a.createElement(G.a,{key:t,value:e._id},r.a.createElement(J.a,{checked:e.indexOf(e._id)>-1}),r.a.createElement(Y.a,{primary:e.name}))}))),"simple"===u&&(A=a.map((function(e,t){return r.a.createElement(G.a,{key:t,value:e._id},e.name)}))),r.a.createElement(M.a,{variant:"outlined",margin:"normal",className:b.select+" "+i},r.a.createElement(V.a,{ref:y,id:"demo-simple-select-outlined-label"},p),r.a.createElement(U.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"category",value:f,onChange:function(e){console.log("changed",e.target.value),v(e.target.value),c(e.target.value)},labelWidth:j,multiple:s},A))},K=a(330),Q=a(224),Z=a.n(Q),ee=Object(A.a)((function(e){return{input:{width:"100%"},header:{marginBottom:e.spacing(3)},addButton:{marginTop:e.spacing(2)}}})),te=function(e){var t=e.defaultValue,a=void 0===t?"":t,n=e.handler,i=ee();return r.a.createElement(H.a,{variant:"outlined",id:"outlined-multiline-static",multiline:!0,rows:"8",defaultValue:a,className:i.input,onChange:n})},ae=function(e){var t=e.items,a=e.changeHandler,i=ee(),o=function(e){var t=[{content:e.target.value}];a(t)};return r.a.createElement(n.Fragment,null,r.a.createElement(I.a,{component:"h2",variant:"h4",className:i.header},"Main content"),t.map((function(e,t){return r.a.createElement(te,{handler:o,defaultValue:e.content})})),r.a.createElement(B.a,{textAlign:"center"},r.a.createElement(K.a,{variant:"extended",color:"primary","aria-label":"add",size:"small",className:i.addButton},r.a.createElement(Z.a,null),"more paragraph")))},ne=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return{title:e,path:t,component:a,reducer:n,onEnter:i,children:r}},re=function(e){return Object.keys(e).map((function(t){var a=Array.isArray(e[t])?e[t]:[e[t]];return a.forEach((function(e){return e.MODULE=t})),a})).reduce((function(e,t){return e.concat(t)}))},ie=function(e,t){return console.log("uploading",t),new Promise((function(a,n){if(!t)return a({result:"success",message:"no need for uploading to cloud"});var r=new FormData;r.append("app","medium"),r.append("filename",t),r.append("file",e),fetch("https://cloud.javelin.uz/file-upload.php",{method:"POST",body:r,headers:{Accept:"application/json"}}).then((function(e){e.ok&&a(e.json()),a({result:"error",message:"request to cloud failed"})})).catch((function(e){console.error("Error on file uploading: ",e),a({result:"error",message:"Error on file uploading: "+e})}))}))},oe=function(e){return function(t){return Object(l.b)(null,(function(e){return{setTitle:function(t){e({type:ta,payload:t})}}}))((function(a){return a.setTitle(t),r.a.createElement(e,null)}))}},ce=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,378))})),le=function(e){Object(R.a)(a,e);var t=Object(T.a)(a);function a(e){return Object(D.a)(this,a),t.call(this,e)}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.items,a=e.loadItems;t&&t.length||a()}},{key:"render",value:function(){console.log("Category List",this.props);var e=this.props,t=e.match,a=e.items,i=(e.loadingItems,e.showDeleteDialog,e.onDelete),o=(e.deleteDialogOpen,e.deleteId,e.header);return r.a.createElement(n.Suspense,{fallback:"Loading..."},r.a.createElement(ce,{columnNames:["Name"],rows:a.map((function(e,t){return{_id:e._id,columns:[{text:e.name}]}})),path:t?t.path:"/admin/categories",header:o,onDelete:i,addItemText:"Add Category",searchBoxPlaceholder:"search category"}))}}]),a}(r.a.Component),se=oe(Object(l.b)((function(e){var t=e.Admin.Category;return Object(b.a)({},t)}),(function(e){return{loadItems:function(){return e({type:ge}),fetch("/api/category/get").then((function(e){return e.ok?e.json():[]})).then((function(t){e({type:fe,payload:{items:t}})}))},onDelete:function(t){var a={id:t};return fetch("/api/category/delete",{method:"POST",body:JSON.stringify(a),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){t.result&&"success"===t.result&&e({type:Oe,payload:{item:t.data}})}))}}}))(le))("Categories"),me=Object(A.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},textField:{width:"100%"},themesSelect:{width:"100%"},button:{float:"right"}}}));function ue(e){var t=e.item,a=e.match,n=(e.themes,e.update),i=e.action,o=e.saving,c=me(),l=r.a.useState(""),m=Object(L.a)(l,2),u=m[0],d=m[1];return u?(console.log("redirecting",u),r.a.createElement(s.a,{to:u})):r.a.createElement(w.a,{maxWidth:"lg",className:c.container},r.a.createElement(S.a,{container:!0,spacing:3},r.a.createElement(S.a,{item:!0,xs:6},r.a.createElement(F.a,{to:"/admin/categories"},r.a.createElement(_.a,{variant:"contained",color:"primary"},r.a.createElement(q.a,null)," Back to list"))),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(N.a,{className:c.paper},r.a.createElement("form",{onSubmit:function(e){var t={name:e.target.elements.name.value};"edit"===i&&(t.id=a.params.itemId),n(t).then((function(e){"success"===e.result&&d("/admin/categories")})),e.preventDefault()}},r.a.createElement(S.a,{container:!0,spacing:3},r.a.createElement(S.a,{item:!0,sm:12},r.a.createElement(H.a,{id:"outlined-basic",className:c.textField,label:"Category name",margin:"normal",variant:"outlined",name:"name",defaultValue:t.name,required:!0})),r.a.createElement(S.a,{item:!0,sm:12},r.a.createElement(_.a,{type:"submit",variant:"contained",color:"primary",className:c.button,disabled:o},o?r.a.createElement(W.a,{size:"1rem"}):"Save"))))))))}var de=function(e){Object(R.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).state={action:""},n}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loadItem,a=e.match,n=e.setTitle;a.params.itemId?(this.setState({action:"edit"}),n("Edit category"),t(a.params.itemId)):(this.setState({action:"add"}),n("Add category"))}},{key:"render",value:function(){console.log("Edit Request",this.props);var e=this.props,t=e.match,a=e.item,n=e.themes,i=e.update,o=e.loadingItem,c=e.saving,l=this.state.action;return o?r.a.createElement(z.a,null):r.a.createElement(ue,{action:l,item:"edit"==l?a:{},match:t,themes:n,update:i,saving:c})}}]),a}(r.a.Component),pe=Object(l.b)((function(e){var t=e.Admin.Category;return{items:t.items,item:t.item,loadingItem:t.loadingItem,saving:t.saving}}),(function(e){return{loadItem:function(t){return e({type:ve}),fetch("/api/category/get?id="+t).then((function(e){return e.ok?e.json():{}})).then((function(t){e({type:be,payload:{item:t}})}))},setTitle:function(t){e({type:ta,payload:t})},update:function(t){return e({type:ye}),fetch("/api/category/store",{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){return e({type:Ee,payload:{item:t.data,result:t.result}}),t}))}}}))(de),he="Admin/Category/",ge=he+"LoadItemsReq",fe=he+"LoadItemsRes",ve=he+"LoadItemReq",be=he+"LoadItemRes",ye=he+"SaveReq",Ee=he+"SaveRes",Oe=he+"DeleteRes",je={items:[],loadingItems:!1,item:{},loadingItem:!1,deleteDialogOpen:!1,deleteId:"",saving:!1},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(b.a)({},e,{loadingItem:!0});case be:var a=t.payload.item;return Object(b.a)({},e,{item:a,loadingItem:!1});case ge:return Object(b.a)({},e,{loadingItems:!0});case fe:return Object(b.a)({},e,{loadingItems:!1,items:t.payload.items});case ye:return Object(b.a)({},e,{saving:!0});case Ee:a=t.payload.item;var n=!1,r=e.items.map((function(e,t){return e&&e._id===a._id?(n=!0,a):e}));return n||r.push(a),Object(b.a)({},e,{items:r,saving:!1});case"Admin/Category/ShowDeleteDialog":return Object(b.a)({},e,{deleteDialogOpen:!0,deleteId:t.payload.deleteId});case"Admin/Category/CloseDeleteDialog":return Object(b.a)({},e,{deleteDialogOpen:!1});case Oe:a=t.payload.item;return Object(b.a)({},e,{items:e.items.filter((function(e){return e._id!==a._id}))});default:return e}},Ae=ne("Categories","/categories",(function(e){return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path,component:se}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/edit/:itemId",component:pe}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/add",component:pe}))}),xe),Ie=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,378))})),we=function(e){Object(R.a)(a,e);var t=Object(T.a)(a);function a(e){return Object(D.a)(this,a),t.call(this,e)}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.items,a=e.loadItems;t&&t.length||a()}},{key:"render",value:function(){console.log("Category List",this.props);var e=this.props,t=e.match,a=e.items,i=(e.loadingItems,e.showDeleteDialog,e.onDelete),o=(e.deleteDialogOpen,e.deleteId,e.header);return r.a.createElement(n.Suspense,{fallback:"Loading..."},r.a.createElement(Ie,{columnNames:["Author","Name"],rows:a.map((function(e,t){return{_id:e._id,columns:[{type:"image",url:e.image.url,width:"60px"},{text:e.name}]}})),path:t?t.path:"/admin/authors",header:o,onDelete:i,addItemText:"Add Author",searchBoxPlaceholder:"search category"}))}}]),a}(r.a.Component),Se=oe(Object(l.b)((function(e){var t=e.Admin.Author;return Object(b.a)({},t)}),(function(e){return{loadItems:function(){return e({type:Re}),fetch("/api/author/get").then((function(e){return e.ok?e.json():[]})).then((function(t){e({type:Le,payload:{items:t}})}))},onDelete:function(t){var a={id:t};return fetch("/api/author/delete",{method:"POST",body:JSON.stringify(a),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){t.result&&"success"===t.result&&e({type:We,payload:{item:t.data}})}))}}}))(we))("Authors"),Ne=Object(A.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},textField:{width:"100%"},themesSelect:{width:"100%"},button:{float:"right"}}}));function ke(e){var t=e.item,a=e.match,n=(e.themes,e.update),i=e.action,o=e.saving,c=Ne(),l=r.a.useState(""),m=Object(L.a)(l,2),u=m[0],d=m[1],p=r.a.useState(t.firstname),h=Object(L.a)(p,2),g=h[0],f=h[1],v=r.a.useState(t.lastname),b=Object(L.a)(v,2),y=b[0],E=b[1],O=r.a.useState(t.description),j=Object(L.a)(O,2),x=j[0],A=j[1],I=r.a.useState(null),k=Object(L.a)(I,2),D=k[0],C=k[1];return u?(console.log("redirecting",u),r.a.createElement(s.a,{to:u})):r.a.createElement(w.a,{maxWidth:"lg",className:c.container},r.a.createElement(S.a,{container:!0,spacing:3},r.a.createElement(S.a,{item:!0,xs:6},r.a.createElement(F.a,{to:"/admin/authors"},r.a.createElement(_.a,{variant:"contained",color:"primary"},r.a.createElement(q.a,null)," Back to list"))),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(N.a,{className:c.paper},r.a.createElement("form",{onSubmit:function(e){var t=new FormData;t.append("firstname",g),t.append("lastname",y),t.append("description",x),t.append("image",D),"edit"===i&&t.append("id",a.params.itemId),n(t).then((function(e){"success"===e.result&&d("/admin/authors")})),e.preventDefault()}},r.a.createElement(S.a,{container:!0,spacing:3},r.a.createElement(S.a,{item:!0,sm:6},r.a.createElement(H.a,{id:"outlined-basic",className:c.textField,label:"Firstname",margin:"normal",variant:"outlined",name:"firstname",defaultValue:g,required:!0,onChange:function(e){return f(e.target.value)}})),r.a.createElement(S.a,{item:!0,sm:6},r.a.createElement(H.a,{id:"outlined-basic",className:c.textField,label:"Lastname",margin:"normal",variant:"outlined",name:"lastname",defaultValue:y,required:!0,onChange:function(e){return E(e.target.value)}})),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(De,{image:t.image}),r.a.createElement(_.a,{variant:"contained",component:"label"},"Upload image",r.a.createElement("input",{type:"file",style:{display:"none"},onChange:function(e){C(e.target.files[0])}}))),r.a.createElement(S.a,{item:!0,sm:12},r.a.createElement(H.a,{variant:"outlined",id:"outlined-multiline-static",label:"Description",multiline:!0,rows:"4",defaultValue:x,className:c.textField,onChange:function(e){A(e.target.value)}})),r.a.createElement(S.a,{item:!0,sm:12},r.a.createElement(_.a,{type:"submit",variant:"contained",color:"primary",className:c.button,disabled:o},o?r.a.createElement(W.a,{size:"1rem"}):"Save"))))))))}var De=function(e){var t=e.image;return t?r.a.createElement(B.a,{width:60},r.a.createElement("img",{src:t.url})):""},Ce=function(e){Object(R.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).state={action:""},n}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loadItem,a=e.match,n=e.setTitle;a.params.itemId?(this.setState({action:"edit"}),n("Edit category"),t(a.params.itemId)):(this.setState({action:"add"}),n("Add category"))}},{key:"render",value:function(){console.log("Edit Request",this.props);var e=this.props,t=e.match,a=e.item,n=e.themes,i=e.update,o=e.loadingItem,c=e.saving,l=this.state.action;return o?r.a.createElement(z.a,null):r.a.createElement(ke,{action:l,item:"edit"==l?a:{},match:t,themes:n,update:i,saving:c})}}]),a}(r.a.Component),Te=Object(l.b)((function(e){var t=e.Admin.Author;return{items:t.items,item:t.item,loadingItem:t.loadingItem,saving:t.saving}}),(function(e){return{loadItem:function(t){return e({type:Fe}),fetch("/api/author/get?id="+t).then((function(e){return e.ok?e.json():{}})).then((function(t){e({type:Be,payload:{item:t}})}))},setTitle:function(t){e({type:ta,payload:t})},update:function(t){return e({type:He}),fetch("/api/author/store",{method:"POST",body:t}).then((function(e){return e.ok?e.json():{}})).then((function(a){return ie(t.get("image"),a.filename).then((function(t){return e({type:_e,payload:{item:a.data,result:a.result}}),a}))}))}}}))(Ce),Re="Admin/Author/LoadItemsReq",Le="Admin/Author/LoadItemsRes",Fe="Admin/Author/LoadItemReq",Be="Admin/Author/LoadItemRes",He="Admin/Author/SaveReq",_e="Admin/Author/SaveRes",We="Admin/Author/DeleteRes",ze={items:[],loadingItems:!1,item:{},loadingItem:!1,deleteDialogOpen:!1,deleteId:"",saving:!1},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:return Object(b.a)({},e,{loadingItem:!0});case Be:var a=t.payload.item;return Object(b.a)({},e,{item:a,loadingItem:!1});case Re:return Object(b.a)({},e,{loadingItems:!0});case Le:return Object(b.a)({},e,{loadingItems:!1,items:t.payload.items});case He:return Object(b.a)({},e,{saving:!0});case _e:a=t.payload.item;var n=!1,r=e.items.map((function(e,t){return e&&e._id===a._id?(n=!0,a):e}));return n||r.push(a),Object(b.a)({},e,{items:r,saving:!1});case"Admin/Author/ShowDeleteDialog":return Object(b.a)({},e,{deleteDialogOpen:!0,deleteId:t.payload.deleteId});case"Admin/Author/CloseDeleteDialog":return Object(b.a)({},e,{deleteDialogOpen:!1});case We:a=t.payload.item;return Object(b.a)({},e,{items:e.items.filter((function(e){return e._id!==a._id}))});default:return e}},qe=ne("Authors","/authors",(function(e){return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path,component:Se}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/edit/:itemId",component:Te}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/add",component:Te}))}),Pe),Me=Object(A.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},textField:{width:"100%"},button:{float:"right"}}}));function Ue(e){var t,a=e.item,n=e.match,i=e.categories,o=void 0===i?[]:i,c=e.authors,l=void 0===c?[]:c,m=e.update,u=e.action,d=e.saving,p=Me(),h=r.a.useState(""),g=Object(L.a)(h,2),f=g[0],v=g[1],b=r.a.useState(a.title),y=Object(L.a)(b,2),E=y[0],O=y[1],j=r.a.useState(a.category||[]),x=Object(L.a)(j,2),A=x[0],I=x[1],k=r.a.useState(a.author?(t=a.author)&&"object"===typeof t&&t.constructor===Object?a.author._id:a.author:""),D=Object(L.a)(k,2),C=D[0],T=D[1],R=r.a.useState(a.subtitle||""),B=Object(L.a)(R,2),z=B[0],P=B[1],M=r.a.useState(a.paragraphs||[{content:""}]),U=Object(L.a)(M,2),J=U[0],V=U[1],G=r.a.useState(null),Y=Object(L.a)(G,2),X=Y[0],K=Y[1];return f?(console.log("redirecting",f),r.a.createElement(s.a,{to:f})):r.a.createElement(w.a,{maxWidth:"lg",className:p.container},r.a.createElement(S.a,{container:!0,spacing:3},r.a.createElement(S.a,{item:!0,xs:6},r.a.createElement(F.a,{to:"/admin/articles"},r.a.createElement(_.a,{variant:"contained",color:"primary"},r.a.createElement(q.a,null)," Back to list"))),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(N.a,{className:p.paper},r.a.createElement("form",{onSubmit:function(e){e.target.elements;var t=new FormData;t.append("title",E),t.append("subtitle",z),t.append("category",JSON.stringify(A)),t.append("author",C),t.append("paragraphs",JSON.stringify(J)),t.append("image",X),"edit"===u&&t.append("id",n.params.itemId),m(t).then((function(e){e.result,ie(X,e.filename).then((function(e){e.result,v("/admin/articles")}))})),e.preventDefault()}},r.a.createElement(S.a,{container:!0,spacing:3},r.a.createElement(S.a,{item:!0,sm:6},r.a.createElement(H.a,{id:"outlined-basic",className:p.textField,label:"Title",margin:"normal",variant:"outlined",name:"title",defaultValue:E,required:!0,onChange:function(e){O(e.target.value)}})),r.a.createElement(S.a,{item:!0,sm:6},r.a.createElement($,{options:o,value:A.map((function(e,t){return e._id})),className:p.selectCategory,multiple:!0,changeHandler:function(e){return I(e)},label:"Category"})),r.a.createElement(S.a,{item:!0,sm:6},r.a.createElement($,{options:l,value:C,className:p.selectCategory,changeHandler:T,label:"Author"})),r.a.createElement(S.a,{item:!0,xs:6},r.a.createElement(Ve,{image:a.image}),r.a.createElement(_.a,{variant:"contained",component:"label"},"Upload image",r.a.createElement("input",{type:"file",style:{display:"none"},onChange:function(e){K(e.target.files[0])}}))),r.a.createElement(S.a,{item:!0,sm:12},r.a.createElement(H.a,{variant:"outlined",id:"outlined-multiline-static",label:"Subtitle",multiline:!0,rows:"2",defaultValue:z,className:p.textField,onChange:function(e){P(e.target.value)}})),r.a.createElement(S.a,{item:!0,sm:12},r.a.createElement(ae,{items:J,changeHandler:function(e){return V(e)}})),r.a.createElement(S.a,{item:!0,sm:12},r.a.createElement(_.a,{type:"submit",variant:"contained",color:"primary",className:p.button,disabled:d},d?r.a.createElement(W.a,{size:"1rem"}):"Save"))))))))}var Je=function(e){Object(R.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).state={action:n.props.match.params.itemId?"edit":"add"},n}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loadItem,a=e.match,n=e.setTitle,r=e.loadCategories,i=e.categories,o=e.loadAuthors,c=e.authors;a.params.itemId?(n("Edit article"),t(a.params.itemId)):n("Add article"),i.length||r(),c.length||o()}},{key:"render",value:function(){console.log("Edit item",this.props);var e=this.props,t=e.match,a=e.item,n=e.update,i=e.loadingItem,o=e.saving,c=e.categories,l=e.authors,s=this.state.action;return i?r.a.createElement(z.a,null):r.a.createElement(Ue,{action:s,item:"edit"===s?a:{},match:t,categories:c,authors:l,update:n,saving:o})}}]),a}(r.a.Component),Ve=function(e){var t=e.image;return t?r.a.createElement(B.a,{width:300},r.a.createElement("img",{src:t.url})):""},Ge=Object(l.b)((function(e){var t=e.Admin.Article,a=e.Admin.Category,n=e.Admin.Author;return{items:t.items,item:t.item,loadingItem:t.loadingItem,saving:t.saving,categories:a.items,authors:n.items}}),(function(e){return{loadItem:function(t){return e({type:Ye}),fetch("/api/article/get?id="+t).then((function(e){return e.ok?e.json():{}})).then((function(t){e({type:Xe,payload:{item:t}})}))},setTitle:function(t){e({type:ta,payload:t})},update:function(t){return e({type:$e}),fetch("/api/article/store",{method:"POST",body:t}).then((function(e){return e.ok?e.json():{}})).then((function(t){return e({type:Ke,payload:{item:t.data,result:t.result}}),t}))},loadCategories:function(){return e({type:ge}),fetch("/api/category/get").then((function(e){return e.ok?e.json():[]})).then((function(t){e({type:fe,payload:{items:t}})}))},loadAuthors:function(){return e({type:Re}),fetch("/api/author/get").then((function(e){return e.ok?e.json():[]})).then((function(t){e({type:Le,payload:{items:t}})}))}}}))(Je),Ye="Admin/Article/LoadItemReq",Xe="Admin/Article/LoadItemRes",$e="Admin/Article/SaveReq",Ke="Admin/Article/SaveRes",Qe={items:[],loadingItems:!1,shouldLoadItems:!0,item:{},loadingItem:!1,deleteDialogOpen:!1,deleteId:"",saving:!1},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ye:return Object(b.a)({},e,{loadingItem:!0});case Xe:var a=t.payload.item;return Object(b.a)({},e,{item:a,loadingItem:!1});case"Admin/Article/LoadItemsReq":return Object(b.a)({},e,{loadingItems:!0});case"Admin/Article/LoadItemsRes":return Object(b.a)({},e,{loadingItems:!1,shouldLoadItems:!1,items:t.payload.items});case $e:return Object(b.a)({},e,{saving:!0});case Ke:a=t.payload.item;var n=!1,r=e.items.map((function(e,t){return e&&e._id===a._id?(n=!0,a):e}));return n||r.push(a),Object(b.a)({},e,{items:r,saving:!1});case"Admin/Article/ShowDeleteDialog":return Object(b.a)({},e,{deleteDialogOpen:!0,deleteId:t.payload.deleteId});case"Admin/Article/CloseDeleteDialog":return Object(b.a)({},e,{deleteDialogOpen:!1});case"Admin/Article/DeleteRes":a=t.payload.item;return Object(b.a)({},e,{items:e.items.filter((function(e){return e._id!==a._id}))});default:return e}},et=ne("Articles","/articles",(function(e){return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path,component:rt}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/edit/:itemId",component:Ge}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/add",component:Ge}))}),Ze),tt=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,378))})),at=function(e){Object(R.a)(a,e);var t=Object(T.a)(a);function a(e){return Object(D.a)(this,a),t.call(this,e)}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.items,e.loadItems);e.shouldLoadItems&&t()}},{key:"render",value:function(){console.log("Articles List",this.props);var e=this.props,t=e.match,a=e.items,i=e.loadingItems,o=(e.showDeleteDialog,e.onDelete);e.deleteDialogOpen,e.deleteId,e.header;return r.a.createElement(n.Suspense,{fallback:"Loading..."},r.a.createElement(tt,{loading:i,columnNames:["Article","Title","Category","Author"],rows:a.map((function(e,t){return{_id:e._id,columns:[{type:"image",url:e.image?e.image.url:""},{text:e.title},{text:e.category.map((function(e,t){return e.name})).join(",")},{text:e.author?e.author.name:"Blogger"}]}})),path:t?t.path:"/admin/articles",onDelete:o,addItemText:"Add Article"}))}}]),a}(r.a.Component),nt=Object(l.b)((function(e){var t=e.Admin.Article;return Object(b.a)({},t)}),(function(e){return{loadItems:function(){return e({type:"Admin/Article/LoadItemsReq"}),fetch("/api/article/get").then((function(t){return t.ok?t.json():(e({type:na,payload:{type:"error",text:"Connection with server failed..."}}),[])})).then((function(t){e({type:"Admin/Article/LoadItemsRes",payload:{items:t}})}))},onDelete:function(t){var a={id:t};return fetch("/api/article/delete",{method:"POST",body:JSON.stringify(a),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){t.result&&"success"===t.result&&e({type:"Admin/Article/DeleteRes",payload:{item:t.data}})}))}}}))(at),rt=oe(nt)("Articles");var it=Object(A.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"}}})),ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"DEFAULT"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Dashboard/FirstAction":return{name:"Javlonbek"};default:return e}},ct=ne("Dashboard","/",(function(e){var t=it();Object(x.a)(t.paper,t.fixedHeight);return console.log("Dashboard",e),r.a.createElement(r.a.Fragment,null,r.a.createElement(nt,{header:"Articles"}),r.a.createElement(w.a,{maxWidth:"lg",className:t.container},r.a.createElement(S.a,{container:!0,spacing:3},r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(N.a,{className:t.paper},"Some Dashboard Content")))))}),ot),lt=a(348),st=a(356),mt=a(338),ut=Object(A.a)((function(e){return{collapse:{position:"absolute",top:"0.8rem",right:"0.8rem",zIndex:9999}}})),dt=Object(l.b)((function(e){return Object(b.a)({},e.Admin.alert)}),(function(e){return{close:function(){e({type:ra})}}}))((function(e){var t=e.type,a=e.text,n=e.close,i=e.open,o=ut();return console.log("alert rendering",i),t?(setTimeout((function(){return n()}),5e3),r.a.createElement(mt.a,{in:i,className:o.collapse},r.a.createElement(st.a,{severity:t,onClose:function(){return n()}},a.toString()))):null})),pt=a(72),ht=a(340),gt=a(345),ft=a(341),vt=a(342),bt=a(298),yt=a(346),Et=a(327),Ot=a(343),jt=a(144),xt=a.n(jt),At=a(145),It=a.n(At),wt=a(289),St=a(339),Nt=a(344);function kt(){return r.a.createElement(I.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(F.a,{color:"inherit",to:"/"},"RJ")," ",(new Date).getFullYear(),".")}var Dt=Object(A.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(b.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(pt.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}})),Ct=function(e){var t=e.items,a=e.accessRights;return t=t.map((function(e,t){if(a&&a.length&&a.indexOf(e.accessRightTitle)>=0||!e.accessRightTitle){var n=e.icon;return r.a.createElement(wt.a,{button:!0,key:t},r.a.createElement(St.a,null,r.a.createElement(n,null)),r.a.createElement(F.a,{to:e.link},r.a.createElement(Y.a,{primary:e.text})))}})),r.a.createElement("div",null,t)};var Tt=Object(l.b)((function(e){return{title:e.Admin.title,menuItems:e.Admin.menuItems,rights:e.Admin.user.rights,user:e.Admin.user}}),(function(e){return{logOut:function(){return e({type:aa}),fetch("/api/user/logout").then((function(e){return console.log("logged out"),""}))}}}))((function(e){console.log("Layout",e);var t=Dt(),a=r.a.useState(!0),n=Object(L.a)(a,2),i=n[0],o=n[1];return Object(x.a)(t.paper,t.fixedHeight),r.a.createElement("div",{className:t.root},r.a.createElement(ht.a,null),r.a.createElement(ft.a,{position:"absolute",className:Object(x.a)(t.appBar,i&&t.appBarShift)},r.a.createElement(vt.a,{className:t.toolbar},r.a.createElement(Et.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){o(!0)},className:Object(x.a)(t.menuButton,i&&t.menuButtonHidden)},r.a.createElement(xt.a,null)),r.a.createElement(I.a,{component:"h1",variant:"h4",color:"inherit",noWrap:!0,className:t.title},e.title),r.a.createElement(Et.a,{color:"inherit"},r.a.createElement(Ot.a,{badgeContent:0,color:"secondary"},r.a.createElement(It.a,null))),r.a.createElement(Et.a,{color:"inherit",title:"Log out",onClick:function(t){e.logOut().then((function(){e.history.goBack()}))}},r.a.createElement(Nt.a,null)))),r.a.createElement(gt.a,{variant:"permanent",classes:{paper:Object(x.a)(t.drawerPaper,!i&&t.drawerPaperClose)},open:i},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(Et.a,{onClick:function(){o(!1)}},r.a.createElement(q.a,null))),r.a.createElement(yt.a,null),r.a.createElement(bt.a,null,r.a.createElement(Ct,{items:e.menuItems,accessRights:e.rights}))),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),e.children,r.a.createElement(kt,null)))})),Rt=a(358),Lt=a(347),Ft=a(239),Bt=a.n(Ft);function Ht(){return r.a.createElement(I.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(k.a,{color:"inherit",href:"https://material-ui.com/"},"RJ")," ",(new Date).getFullYear(),".")}var _t=Object(A.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Wt=function(e){Object(R.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).changeHandler=function(e,t){n.setState(Object(pt.a)({},e,t))},n.submitHandler=function(){(0,n.props.signIn)(n.state.email,n.state.password)},n.state={email:"",password:""},n}return Object(C.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.signIn,e.user),a=(e.match,this.state);a.email,a.password;if(console.log("Login",this.props),t&&t.loggedIn){var n=window.localStorage.getItem("lastVisitedPath");return r.a.createElement(s.a,{to:n||"/admin"})}return r.a.createElement(w.a,{component:"main",maxWidth:"xs"},r.a.createElement(ht.a,null),r.a.createElement(zt,{changeHandler:this.changeHandler,submitHandler:this.submitHandler,failed:t.loginAttempted,authenticating:t.authenticating}),r.a.createElement(dt,null),r.a.createElement(B.a,{mt:8},r.a.createElement(Ht,null)))}}]),a}(r.a.Component),zt=function(e){var t=e.changeHandler,a=e.submitHandler,n=e.failed,i=e.authenticating,o=_t();return r.a.createElement("div",{className:o.paper},r.a.createElement(Rt.a,{className:o.avatar},r.a.createElement(Bt.a,null)),r.a.createElement(I.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:o.form,onSubmit:function(e){e.preventDefault(),a()}},r.a.createElement(H.a,{error:n,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"username",autoComplete:"off",autoFocus:!0,onChange:function(e){return t("email",e.target.value)}}),r.a.createElement(H.a,{error:n,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"off",onChange:function(e){return t("password",e.target.value)}}),r.a.createElement(Lt.a,{control:r.a.createElement(J.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(_.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit,disabled:i},i?r.a.createElement(W.a,null):"Sign In"),r.a.createElement(S.a,{container:!0},r.a.createElement(S.a,{item:!0,xs:!0},r.a.createElement(k.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(S.a,{item:!0},r.a.createElement(k.a,{href:"#",variant:"body2"},"Don't have an account? Sign Up")))))},Pt=Object(l.b)((function(e){return{user:e.Admin.user}}),(function(e){return{signIn:function(t,a){return e({type:Zt}),fetch("/admin/login",{method:"POST",body:JSON.stringify({username:t,password:a}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e({type:ea,payload:Object(b.a)({},t.user,{loginAttempted:!0})}),t.result})).catch((function(t){e({type:ea,payload:{}}),e({type:na,payload:{type:"error",text:"Connection with server failed..."}})}))},alert:function(t){e({type:na,payload:t})}}}))(Wt),qt=a(245),Mt=a(9),Ut="#FFFFFF",Jt={black:"#000000",white:Ut,primary:{contrastText:Ut,dark:Mt.a.indigo[900],main:Mt.a.indigo[500],light:Mt.a.indigo[100]},secondary:{contrastText:Ut,dark:Mt.a.blue[900],main:Mt.a.blue.A400,light:Mt.a.blue.A400},success:{contrastText:Ut,dark:Mt.a.green[900],main:Mt.a.green[600],light:Mt.a.green[400]},info:{contrastText:Ut,dark:Mt.a.blue[900],main:Mt.a.blue[600],light:Mt.a.blue[400]},warning:{contrastText:Ut,dark:Mt.a.orange[900],main:Mt.a.orange[600],light:Mt.a.orange[400]},error:{contrastText:Ut,dark:Mt.a.red[900],main:Mt.a.red[600],light:Mt.a.red[400]},text:{primary:Mt.a.blueGrey[900],secondary:Mt.a.blueGrey[600],link:Mt.a.blue[600]},background:{default:"#F4F6F8",paper:Ut},icon:Mt.a.blueGrey[600],divider:Mt.a.grey[200]},Vt={h1:{color:Jt.text.primary,fontWeight:500,fontSize:"35px",letterSpacing:"-0.24px",lineHeight:"40px"},h2:{color:Jt.text.primary,fontWeight:500,fontSize:"29px",letterSpacing:"-0.24px",lineHeight:"32px"},h3:{color:Jt.text.primary,fontWeight:500,fontSize:"24px",letterSpacing:"-0.06px",lineHeight:"28px"},h4:{color:Jt.text.primary,fontWeight:500,fontSize:"20px",letterSpacing:"-0.06px",lineHeight:"24px"},h5:{color:Jt.text.primary,fontWeight:500,fontSize:"16px",letterSpacing:"-0.05px",lineHeight:"20px"},h6:{color:Jt.text.primary,fontWeight:500,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"20px"},subtitle1:{color:Jt.text.primary,fontSize:"16px",letterSpacing:"-0.05px",lineHeight:"25px"},subtitle2:{color:Jt.text.secondary,fontWeight:400,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"21px"},body1:{color:Jt.text.primary,fontSize:"15px",letterSpacing:"-0.05px",lineHeight:"21px"},body2:{color:Jt.text.secondary,fontSize:"13px",letterSpacing:"-0.04px",lineHeight:"18px"},button:{color:Jt.text.primary,fontSize:"14px"},caption:{color:Jt.text.secondary,fontSize:"11px",letterSpacing:"0.33px",lineHeight:"13px"},overline:{color:Jt.text.secondary,fontSize:"11px",fontWeight:500,letterSpacing:"0.33px",lineHeight:"13px",textTransform:"uppercase"}},Gt={MuiButton:{contained:{boxShadow:"0 1px 1px 0 rgba(0,0,0,0.14), 0 2px 1px -1px rgba(0,0,0,0.12), 0 1px 3px 0 rgba(0,0,0,0.20)",backgroundColor:"#FFFFFF"}},MuiIconButton:{root:{color:Jt.icon,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.03)"}}},MuiPaper:{elevation1:{boxShadow:"0 0 0 1px rgba(63,63,68,0.05), 0 1px 3px 0 rgba(63,63,68,0.15)"}},MuiTableCell:{root:Object(b.a)({},Vt.body1,{borderBottom:"1px solid ".concat(Jt.divider)})},MuiTableHead:{root:{backgroundColor:Mt.a.grey[50]}},MuiTypography:{gutterBottom:{marginBottom:8}}},Yt=Object(qt.a)({palette:Jt,typography:Vt,overrides:Gt,zIndex:{appBar:1200,drawer:1100}});function Xt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],function(a){Object(R.a)(i,a);var n=Object(T.a)(i);function i(e){var t;return Object(D.a)(this,i),(t=n.call(this,e)).getUser=function(){return new Promise((function(e,a){t.props.user&&t.props.user.loggedIn?e(t.props.user):t.props.getActiveUser().then((function(t){e(t)}))}))},t.state={redirect:!1,loading:!0,hasAccessRight:!0},t}return Object(C.a)(i,[{key:"componentDidMount",value:function(){var e=this;this.getUser().then((function(a){var n=!0,r=!1;a&&a._id?!t||a.rights.indexOf(t)>=0||(n=!1):r=!0,e.setState({redirect:r,loading:!1,hasAccessRight:n})}))}},{key:"render",value:function(){console.log("withAuth",t);var a=this.state,n=a.redirect,i=a.loading,o=a.hasAccessRight,c=this.props;return c.location.pathname===c.match.path+"/login"?r.a.createElement(lt.a,{theme:Yt},r.a.createElement(Pt,null)):i?r.a.createElement(z.a,null):(o||(console.log("has no access right",c.user.rights),c.history.goBack()),!c.user.loggedIn&&n?(window.localStorage.setItem("lastVisitedPath",this.props.location.pathname),console.log("redirecting",c.match.path+"/login"),r.a.createElement(s.a,{to:"/admin/login"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(e,this.props)))}}]),i}(n.Component)),i=function(e){return{user:e.Admin.user}},o=function(e){return{getActiveUser:function(){return e({type:Zt}),fetch("/user/active").then((function(e){return e.json()})).then((function(t){return e({type:ea,payload:t.user}),t.user})).catch((function(t){return e({type:ea,payload:{}}),console.error(t),e({type:na,payload:{type:"error",text:"Connection with server failed..."}}),{}}))}}};return Object(l.b)(i,o)(a)}var $t=function(e){Object(R.a)(a,e);var t=Object(T.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(C.a)(a,[{key:"render",value:function(){var e=this.props;return r.a.createElement(lt.a,{theme:Yt},r.a.createElement(dt,null),r.a.createElement(Tt,e,r.a.createElement(Kt,{routes:e.routes,match:e.match})))}}]),a}(r.a.Component),Kt=function(e){var t=e.routes,a=e.match;return t.map((function(e,t){return r.a.createElement(s.b,{exact:e.path===a.path+"/",path:e.path,key:e.path,component:Xt(e.component,e.title),title:e.title})}))},Qt=Xt($t),Zt="Admin/SignInReq",ea="Admin/SignInRes",ta="Admin/SetTitle",aa="Admin/LogOut",na="Admin/Alert",ra="Admin/AlertClose",ia={title:"Dashboard",menuItems:[{text:"Dashboard",accessRightTitle:"Dashboard",link:"/admin",icon:y.a},{text:"Authors",accessRightTitle:"Authors",link:"/admin/authors",icon:E.a},{text:"Articles",accessRightTitle:"Articles",link:"/admin/articles",icon:O.a},{text:"Categories",accessRightTitle:"Categories",link:"/admin/categories",icon:j.a}]},oa={loggedIn:!1,authenticating:!1,loginAttempted:!1},ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zt:return Object(b.a)({},e,{authenticating:!0});case ea:var a=t.payload;return a&&a.username?Object(b.a)({},e,{},t.payload,{loggedIn:!0,authenticating:!1}):Object(b.a)({},e,{},t.payload,{loginFailed:!0,authenticating:!1,loggedIn:!1});case aa:return ia;default:return e}},la={type:"",text:"asd",open:!0},sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:la,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case na:return Object(b.a)({},e,{},t.payload,{open:!0});case ra:return{open:!1,type:""};default:return e}},ma=ne("Admin","/admin",Qt,(function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia,n=arguments.length>1?arguments[1]:void 0;return Object(b.a)({},ia,{Dashboard:ot(a.Dashboard,n),Category:xe(a.Category,n),Article:Ze(a.Article,n),Author:Pe(a.Author,n),user:ca(a.user,n),alert:sa(a.alert,n),title:(e=a.title,t=n,t.type===ta?t.payload:e)})}),{Dashboard:ct,Category:Ae,Article:et,Author:qe}),ua=a(148),da=a(355),pa=a(353),ha=function(e){var t=e.image,a=e.className,n=void 0===a?"":a;return t?r.a.createElement("div",{className:"bg-image "+n,style:{backgroundImage:"url("+t.url+")"}}):""},ga=function(e){var t=e.author,a=r.a.useState(!1),n=Object(L.a)(a,2),i=n[0],o=n[1];return t?r.a.createElement("div",{className:"author"},r.a.createElement("span",{id:t.slug,className:"author-name"},t.name," "),r.a.createElement("span",{className:"author-group"},"in The Ascend "),r.a.createElement(da.a,{placement:"top",isOpen:i,target:t.slug,toggle:function(){return o(!i)},trigger:"hover"},r.a.createElement(pa.a,null,r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"flex-1 mr-2"},r.a.createElement("h2",{className:"h6"},t.name),r.a.createElement("p",{className:"author-description text-faded"},t.description)),r.a.createElement("div",{className:"author-image-box"},r.a.createElement(ha,{className:"author-image",image:t.image})))))):""},fa=function(e){var t=e.subtitle,a=e.link;return t?r.a.createElement(F.a,{to:a},r.a.createElement("p",{className:"subtitle mb-2 text-faded"},t)):""},va=function(e){var t=e.article;return r.a.createElement("div",{className:"article-item article-item-v1 col-12 d-flex mb-3"},r.a.createElement("div",{className:"content-box"},r.a.createElement("span",{className:"text-uppercase reason-text"},"Recommended for you"),r.a.createElement(F.a,{to:"/article/"+t.slug},r.a.createElement("h2",{className:"h5 title"},t.title)),r.a.createElement(fa,{link:"/article/"+t.slug,subtitle:t.subtitle}),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("div",{className:"flex-1"},r.a.createElement(ga,{author:t.author}),r.a.createElement("div",{className:"fs-12"},r.a.createElement("span",{className:"date"},"Mar 31, 2020"),r.a.createElement("span",{className:"dot-separator px-1"}),r.a.createElement("span",{className:"read-time"},"8 min read "))),r.a.createElement("span",{className:"bookmark-button mr-2"},r.a.createElement(ua.a,null)),r.a.createElement("span",{className:"actions-button"},r.a.createElement(ua.b,null)))),r.a.createElement("div",{className:"image-box"},r.a.createElement(ha,{image:t.image,className:"article-image"})))},ba=function(e){Object(R.a)(a,e);var t=Object(T.a)(a);function a(e){return Object(D.a)(this,a),t.call(this,e)}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.items,e.loadItems);e.shouldLoadItems&&t()}},{key:"render",value:function(){console.log("Articles List",this.props);var e=this.props,t=e.items;if(e.loadingItems)return r.a.createElement("div",null,"Loading...");var a=t.map((function(e,t){return r.a.createElement(va,{article:e})}));return r.a.createElement("div",{className:"row"},a)}}]),a}(r.a.Component),ya=Object(l.b)((function(e){var t=e.Article;return{items:t.items,loadingItems:t.loadingItems,shouldLoadItems:t.shouldLoadItems}}),(function(e){return{loadItems:function(){return e({type:Ta}),fetch("/api/article/get").then((function(e){return e.ok?e.json():[]})).then((function(t){e({type:Ra,payload:{items:t}})}))}}}))(ba),Ea=function(e){Object(R.a)(a,e);var t=Object(T.a)(a);function a(e){return Object(D.a)(this,a),t.call(this,e)}return Object(C.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return console.log("Articles List",this.props),r.a.createElement("div",{className:"container py-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-8"},r.a.createElement(ya,null)),r.a.createElement("div",{className:"col-4"},"col-4")))}}]),a}(r.a.Component),Oa=Object(l.b)((function(e){e.Article;return{}}),(function(e){return{}}))(Ea),ja=a(242),xa=function(e){var t=e.author;return t?r.a.createElement("div",{className:"author-v1 d-flex align-items-center"},r.a.createElement("div",{className:"author-image-box mr-2"},r.a.createElement(ha,{className:"author-image rounded-circle",image:t.image})),r.a.createElement("div",{className:"mr-2"},r.a.createElement("div",{className:"d-flex align-items-center mb-1"},r.a.createElement("h2",{className:"h6 m-0 mr-2"},t.name),r.a.createElement("div",{className:"btn btn-sm py-0 border rounded"}," Follow ")),r.a.createElement("div",{className:"text-faded text-small"},r.a.createElement("span",null,"Feb 2 "),r.a.createElement("span",{className:"dot-separator"}),r.a.createElement("span",null," 5 min read"),r.a.createElement("span",{className:"star"}," ",r.a.createElement(ja.a,null))))):""},Aa=function(e){Object(R.a)(a,e);var t=Object(T.a)(a);function a(e){return Object(D.a)(this,a),t.call(this,e)}return Object(C.a)(a,[{key:"componentDidMount",value:function(){this.props.loadItem(this.props.slug)}},{key:"render",value:function(){console.log("Article",this.props);var e=this.props,t=(e.match,e.item),a=e.loadingItem;e.slug;return a?r.a.createElement("span",null,"Loading..."):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"h3 mb-3"},t.title),r.a.createElement("div",{className:"d-flex"},r.a.createElement(xa,{author:t.author})),r.a.createElement(Ia,{image:t.image}),r.a.createElement(wa,{parts:t.paragraphs})))}}]),a}(r.a.Component),Ia=function(e){var t=e.image;return t?r.a.createElement("div",{className:"article-image my-3"},r.a.createElement("img",{src:t.url})):""},wa=function(e){var t=e.parts;return t&&t.length?(t=t.map((function(e,t){return r.a.createElement("p",null,e.content)})),r.a.createElement("div",{className:"content"},t)):""},Sa=Object(l.b)((function(e){var t=e.Article;return{item:t.item,loadingItem:t.loadingItem}}),(function(e){return{loadItem:function(t){return e({type:La}),fetch("/api/article/get?slug="+t).then((function(e){return e.ok?e.json():{}})).then((function(t){e({type:Fa,payload:{item:t}})}))}}}))(Aa),Na=a(243),ka=function(e){var t=e.link,a=e.className,n=void 0===a?"":a;return t?r.a.createElement("div",{className:n},r.a.createElement(F.a,{to:t},r.a.createElement(Na.a,null)," Back to list")):""},Da=function(e){Object(R.a)(a,e);var t=Object(T.a)(a);function a(e){return Object(D.a)(this,a),t.call(this,e)}return Object(C.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return console.log("Article Single",this.props),r.a.createElement("div",{className:"container py-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-8 m-auto"},r.a.createElement(ka,{link:"/article",className:"text-primary"}),r.a.createElement(Sa,{slug:this.props.match.params.slug}))))}}]),a}(r.a.Component),Ca=Object(l.b)((function(e){e.Article;return{}}),(function(e){return{}}))(Da),Ta="Article/LoadItemsReq",Ra="Article/LoadItemsRes",La="Article/LoadItemReq",Fa="Article/LoadItemRes",Ba={items:[],loadingItems:!1,shouldLoadItems:!0,item:{},loadingItem:!1,deleteDialogOpen:!1,deleteId:"",saving:!1},Ha={Admin:ma,Article:ne("Article","/article",(function(e){return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path,component:Oa}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/:slug",component:Ca}))}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case La:return Object(b.a)({},e,{loadingItem:!0});case Fa:var a=t.payload.item;return Object(b.a)({},e,{item:a,loadingItem:!1});case Ta:return Object(b.a)({},e,{loadingItems:!0});case Ra:return Object(b.a)({},e,{loadingItems:!1,shouldLoadItems:!1,items:t.payload.items});case"Article/SaveReq":return Object(b.a)({},e,{saving:!0});case"Article/SaveRes":a=t.payload.item;var n=!1,r=e.items.map((function(e,t){return e&&e._id===a._id?(n=!0,a):e}));return n||r.push(a),Object(b.a)({},e,{items:r,saving:!1});case"Article/ShowDeleteDialog":return Object(b.a)({},e,{deleteDialogOpen:!0,deleteId:t.payload.deleteId});case"Article/CloseDeleteDialog":return Object(b.a)({},e,{deleteDialogOpen:!1});case"Article/DeleteRes":a=t.payload.item;return Object(b.a)({},e,{items:e.items.filter((function(e){return e._id!==a._id}))});default:return e}}))},_a=function(e){var t=[];return t=Object(f.a)(t),Object(v.d)(e,v.a.apply(void 0,Object(f.a)(t)))}(Object(v.c)(function(e){for(var t={},a=re(e),n=0;n<a.length;n++){var r=a[n].reducer;if("function"!==typeof r)throw new Error("Module "+n+" does not define reducer!");t[a[n].MODULE]=r}return t}(Ha))),Wa=function(e,t,a,n){arguments.length>4&&void 0!==arguments[4]&&arguments[4];return re(e).map((function(e){if(console.log("x",e),!e.component)throw new Error("Component for module "+e+" is not defined");var a={path:e.path,title:e.title,component:e.component,onEnter:e.onEnter?function(a){e.onEnter(a,t.dispatch)}:null};return e.children&&(a.routes=Object.keys(e.children).map((function(a){var n=e.children[a];if(!n.component)throw new Error("Component for module "+e+"/"+a+" is not defined");return{path:e.path+n.path,title:n.title,component:n.component,onEnter:n.onEnter?function(e){n.onEnter(e,t.dispatch)}:null}}))),a}))}(Ha,_a,u,m),za=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Pa(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(c.AppContainer,null,r.a.createElement(d,{store:_a,history:g,routes:Wa})),document.getElementById("root")),function(e){if(console.log("env","production"),"serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");za?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Pa(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Pa(t,e)}))}}()}},[[254,3,4]]]);
//# sourceMappingURL=main.3670bf5b.chunk.js.map