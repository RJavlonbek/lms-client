(this["webpackJsonpreact-cms"]=this["webpackJsonpreact-cms"]||[]).push([[0],{121:function(e,t,a){e.exports=a(136)},127:function(e,t,a){},134:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),l=a.n(o),i=a(99),c=(a(126),a(127),a(14)),s=a(46),m=function(e){return console.log("Roots",e),console.log("state",e.store.getState()),r.a.createElement(c.a,{store:e.store},r.a.createElement(s.c,{history:e.history},e.routes.map((function(e,t){return r.a.createElement(s.b,{key:t,path:e.path,render:function(t){return r.a.createElement(e.component,Object.assign({},t,{routes:e.routes,title:e.title}))}})}))))},u=a(22),p=Object(u.a)();p.listen((function(e){console.log("history is listening: "+e)}));var d=p,h=a(54),f=a(91),g=a(18),b=a(16),E=a(25),v=a(26),y=a(28),O=function(e){function t(e){return Object(g.a)(this,t),Object(E.a)(this,Object(v.a)(t).call(this,e))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){console.log("Profile",this.props);var e=this.props,t=e.name;e.match;return r.a.createElement("div",null,r.a.createElement("h2",null,"\u041f\u0440\u0438\u0432\u0435\u0442, ",t))}}]),t}(r.a.Component),j=Object(c.b)((function(e){return e.Profile}))(O),w=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return{title:e,path:t,component:a,reducer:n,onEnter:o,children:r}},q=function(e){return Object.keys(e).map((function(t){var a=Array.isArray(e[t])?e[t]:[e[t]];return a.forEach((function(e){return e.MODULE=t})),a})).reduce((function(e,t){return e.concat(t)}))},D=w("\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442","/profile",j,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"\u0416\u0430\u0432\u043b\u043e\u043d\u0431\u0435\u043a"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Profile/SetName":return{name:t.name};default:return e}})),N=a(7),x=a(3),R=a(13),k=a(92),P=a(190),S=a(191),F=a(100),C=a(196),I=a(186),T=a(187),M=a(188),A=a(198),B=a(194),H=a(197),W=a(193),L=a(195),J=a(189),_=a(93),z=a.n(_),U=a(94),V=a.n(U),Y=a(192),G=a(56);function $(e){return r.a.createElement(G.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},e.children)}function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var X=Object(k.a)((function(e){return{seeMore:{marginTop:e.spacing(3)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},loader:{margin:"auto"}}}));function Q(e){var t=e.onClose,a=e.open,n=e.deleteId,o=Object(x.a)(e,["onClose","open","deleteId"]);return r.a.createElement(I.a,Object.assign({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:a},o),r.a.createElement(T.a,{dividers:!0},"Are you sure to delete this item? You will not be able to recover this"),r.a.createElement(M.a,null,r.a.createElement(J.a,{autoFocus:!0,onClick:function(e){return t("cancel")},color:"primary"},"Cancel"),r.a.createElement(J.a,{onClick:function(e){return t("ok",n)},color:"primary"},"Ok")))}function Z(e){var t=X(),a=e.header?r.a.createElement($,null,e.header):"";return r.a.createElement(P.a,{maxWidth:"lg",className:t.container},r.a.createElement(S.a,{container:!0,spacing:3},r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(F.a,{className:t.paper},a,r.a.createElement(ee,e)))))}var ee=function(e){var t=e.requests,a=e.showDeleteDialog,n=e.path,o=e.loading,l=X();return o?r.a.createElement(Y.a,{className:l.loader}):(t=t.map((function(e,t){return r.a.createElement(W.a,{key:t},r.a.createElement(B.a,null,e.name),r.a.createElement(B.a,null,e.email),r.a.createElement(B.a,null,e.theme),r.a.createElement(B.a,null,e.message),r.a.createElement(B.a,{align:"right"},r.a.createElement(R.a,{to:n+"/edit/"+e._id},r.a.createElement(L.a,{color:"secondary",size:"small","aria-label":"Edit"},r.a.createElement(z.a,null))),r.a.createElement(L.a,{size:"small","aria-label":"Delete",className:"ml-2",onClick:function(t){return a(e._id)}},r.a.createElement(V.a,null))))})),r.a.createElement(C.a,{size:"small"},r.a.createElement(H.a,null,r.a.createElement(W.a,null,r.a.createElement(B.a,null,"Name"),r.a.createElement(B.a,null,"Email"),r.a.createElement(B.a,null,"Theme"),r.a.createElement(B.a,null,"Message"),r.a.createElement(B.a,{align:"right"},"Action"))),r.a.createElement(A.a,null,t)))},te=function(e){function t(e){return Object(g.a)(this,t),Object(E.a)(this,Object(v.a)(t).call(this,e))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.requests,a=e.loadRequests;this.props.setTitle("Employees"),t&&t.length||a()}},{key:"render",value:function(){console.log("Request List",this.props);var e=this.props,t=e.match,a=e.requests,n=e.loadingRequests,o=e.showDeleteDialog,l=e.closeDeleteDialog,i=e.deleteDialogOpen,c=e.deleteId,s=e.header;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{requests:a,loading:n,path:t?t.path:"/admin/request",showDeleteDialog:o,header:s}),r.a.createElement(Q,{id:"ringtone-menu",deleteId:c,keepMounted:!0,open:i,onClose:l}))}}]),t}(r.a.Component),ae=Object(c.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(a,!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.Admin.Request)}),(function(e){return{loadRequests:function(){return e({type:be}),fetch("/api/request/get").then((function(e){return e.ok?e.json():[]})).then((function(t){e({type:Ee,payload:{requests:t}})}))},setTitle:function(t){e({type:Nt,payload:t})},showDeleteDialog:function(t){e({type:we,payload:{deleteId:t}})},closeDeleteDialog:function(t,a){if(e({type:qe}),console.log("close",t),"ok"===t&&a){var n={id:a};return fetch("/api/request/delete",{method:"POST",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){t.result&&"success"===t.result&&e({type:De,payload:{request:t.data}})}))}}}}))(te),ne=a(45),re=a(226),oe=a(203),le=a(225),ie=a(201),ce=a(221),se=Object(k.a)((function(e){return{seeMore:{marginTop:e.spacing(3)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},textField:{width:"100%"},themesSelect:{width:"100%"},button:{float:"right"}}}));function me(e){var t=e.request,a=e.match,n=e.themes,o=e.update,l=se(),i=r.a.useState(""),c=Object(ne.a)(i,2),m=c[0],u=c[1];return m?(console.log("redirecting",m),r.a.createElement(s.a,{to:m})):r.a.createElement(P.a,{maxWidth:"lg",className:l.container},r.a.createElement(S.a,{container:!0,spacing:3},r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(F.a,{className:l.paper},r.a.createElement("form",{onSubmit:function(e){var t=e.target.elements,n={id:a.params.requestId,name:t.name.value,email:t.email.value,theme:t.theme.value,message:t.message.value};o(n).then((function(e){"success"===e.result&&u("/admin/request")})),e.preventDefault()}},r.a.createElement(S.a,{container:!0,spacing:3},r.a.createElement(S.a,{item:!0,sm:6},r.a.createElement(re.a,{id:"outlined-basic",className:l.textField,label:"Name",margin:"normal",variant:"outlined",name:"name",defaultValue:t.name})),r.a.createElement(S.a,{item:!0,sm:6},r.a.createElement(re.a,{id:"outlined-basic",className:l.textField,label:"Email",margin:"normal",variant:"outlined",name:"email",defaultValue:t.email})),r.a.createElement(S.a,{item:!0,sm:12},r.a.createElement(ue,{theme:t.theme,themes:n})),r.a.createElement(S.a,{item:!0,sm:12},r.a.createElement(re.a,{id:"outlined-multiline-static",label:"Message",multiline:!0,rows:"4",defaultValue:t.message,className:l.textField,margin:"normal",variant:"outlined",name:"message"})),r.a.createElement(S.a,{item:!0,sm:12},r.a.createElement(J.a,{type:"submit",variant:"contained",color:"primary",className:l.button},"Save"))))))))}var ue=function(e){var t=r.a.useState(e.theme),a=Object(ne.a)(t,2),n=a[0],o=a[1],l=se(),i=r.a.useRef(null),c=r.a.useState(0),s=Object(ne.a)(c,2),m=s[0],u=s[1];r.a.useEffect((function(){u(i.current.offsetWidth)}),[]);var p=e.themes.map((function(e,t){return r.a.createElement(oe.a,{value:e.name},e.name)}));return r.a.createElement(ie.a,{variant:"outlined",className:l.themesSelect},r.a.createElement(le.a,{ref:i,id:"demo-simple-select-outlined-label"},"Theme"),r.a.createElement(ce.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"theme",value:n,onChange:function(e){o(e.target.value)},labelWidth:m},p))},pe=function(e){function t(e){return Object(g.a)(this,t),Object(E.a)(this,Object(v.a)(t).call(this,e))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.requests,e.loadRequest),a=e.match;(0,e.setTitle)("Edit employee"),t(a.params.requestId)}},{key:"render",value:function(){console.log("Edit Request",this.props);var e=this.props,t=e.match,a=e.request,n=e.themes,o=e.update;return e.loadingRequest?r.a.createElement("div",null,"loading..."):r.a.createElement(me,{request:a,match:t,themes:n,update:o})}}]),t}(r.a.Component),de=Object(c.b)((function(e){var t=e.Admin.Request;return{requests:t.requests,request:t.request,loadingRequest:t.loadingRequest,themes:e.Form.themes}}),(function(e){return{loadRequest:function(t){return e({type:ve}),fetch("/api/request/get?id="+t).then((function(e){return e.ok?e.json():{}})).then((function(t){e({type:ye,payload:{request:t}})}))},setTitle:function(t){e({type:Nt,payload:t})},update:function(t){return e({type:Oe}),fetch("/api/request/store",{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){return e({type:je,payload:{request:t.data,result:t.result}}),t}))}}}))(pe);function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(a,!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ge="Admin/Request/",be=ge+"LoadRequestsReq",Ee=ge+"LoadRequestsRes",ve=ge+"LoadRequestReq",ye=ge+"LoadRequestRes",Oe=ge+"UpdateReq",je=ge+"UpdateRes",we=ge+"ShowDeleteDialog",qe=ge+"CloseDeleteDialog",De=ge+"DeleteRes",Ne={requests:[],loadingRequests:!1,request:{},loadingRequest:!1,deleteDialogOpen:!1,deleteId:""},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return fe({},e,{loadingRequest:!0});case ye:return fe({},e,{request:a=t.payload.request,loadingRequest:!1});case be:return fe({},e,{loadingRequests:!0});case Ee:return fe({},e,{loadingRequests:!1,requests:t.payload.requests});case je:var a=t.payload.request;return fe({},e,{requests:e.requests.map((function(e,t){return e._id===a._id?a:e}))});case we:return fe({},e,{deleteDialogOpen:!0,deleteId:t.payload.deleteId});case qe:return fe({},e,{deleteDialogOpen:!1});case De:a=t.payload.request;return fe({},e,{requests:e.requests.filter((function(e){return e._id!==a._id}))});default:return e}},Re=w("Requests","/request",(function(e){return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path,component:ae}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/edit/:requestId",component:de}))}),xe),ke=a(4),Pe=a(204);function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Fe=Object(k.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"}}}));var Ce=Object(c.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(a,!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.Dashboard)}),(function(e){return{setTitle:function(t){e({type:Nt,payload:t})}}}))((function(e){e.setTitle("Dashboard");var t=Fe();return Object(ke.a)(t.paper,t.fixedHeight),console.log("Dashboard",e),r.a.createElement(r.a.Fragment,null,r.a.createElement(ae,{header:"Employees"}),r.a.createElement(P.a,{maxWidth:"lg",className:t.container},r.a.createElement(S.a,{container:!0,spacing:3},r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(F.a,{className:t.paper},"Some Dashboard Content")))))})),Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"DEFAULT"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Dashboard/FirstAction":return{name:"Javlonbek"};default:return e}},Te=w("\u0414\u0435\u0448\u0431\u043e\u0430\u0440\u0434","/",Ce,Ie),Me=a(207),Ae=a(223),Be=a(208),He=a(209),We=a(202),Le=a(212),Je=a(210),_e=a(211),ze=a(74),Ue=a.n(ze),Ve=a(76),Ye=a.n(Ve),Ge=a(75),$e=a.n(Ge),Ke=a(138),Xe=a(205),Qe=a(206),Ze=a(96),et=a.n(Ze),tt=a(97),at=a.n(tt),nt=a(95),rt=a.n(nt);function ot(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function lt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ot(a,!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ot(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function it(){return r.a.createElement(G.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(R.a,{color:"inherit",to:"/"},"RJ")," ",(new Date).getFullYear(),".")}var ct=Object(k.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:lt({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(N.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}})),st=function(e){var t=e.linkPrefix;return r.a.createElement("div",null,r.a.createElement(Ke.a,{button:!0},r.a.createElement(Xe.a,null,r.a.createElement(rt.a,null)),r.a.createElement(R.a,{to:"/"},r.a.createElement(Qe.a,{primary:"Home"}))),r.a.createElement(Ke.a,{button:!0},r.a.createElement(Xe.a,null,r.a.createElement(et.a,null)),r.a.createElement(R.a,{to:t+""},r.a.createElement(Qe.a,{primary:"Dashboard"}))),r.a.createElement(Ke.a,{button:!0},r.a.createElement(Xe.a,null,r.a.createElement(at.a,null)),r.a.createElement(R.a,{to:t+"/request"},r.a.createElement(Qe.a,{primary:"Employees"}))))};var mt=function(e){var t=ct(),a=r.a.useState(!0),n=Object(ne.a)(a,2),o=n[0],l=n[1];return Object(ke.a)(t.paper,t.fixedHeight),console.log("Layout",e),r.a.createElement("div",{className:t.root},r.a.createElement(Me.a,null),r.a.createElement(Be.a,{position:"absolute",className:Object(ke.a)(t.appBar,o&&t.appBarShift)},r.a.createElement(He.a,{className:t.toolbar},r.a.createElement(Je.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){l(!0)},className:Object(ke.a)(t.menuButton,o&&t.menuButtonHidden)},r.a.createElement(Ue.a,null)),r.a.createElement(G.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},e.title),r.a.createElement(Je.a,{color:"inherit"},r.a.createElement(_e.a,{badgeContent:0,color:"secondary"},r.a.createElement($e.a,null))))),r.a.createElement(Ae.a,{variant:"permanent",classes:{paper:Object(ke.a)(t.drawerPaper,!o&&t.drawerPaperClose)},open:o},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(Je.a,{onClick:function(){l(!1)}},r.a.createElement(Ye.a,null))),r.a.createElement(Le.a,null),r.a.createElement(We.a,null,r.a.createElement(st,{linkPrefix:e.match.path}))),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),e.children,r.a.createElement(it,null)))},ut=a(213),pt=a(214),dt=a(222),ht=a(220),ft=a(98),gt=a.n(ft);function bt(){return r.a.createElement(G.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Pe.a,{color:"inherit",href:"https://material-ui.com/"},"RJ")," ",(new Date).getFullYear(),".")}var Et=Object(k.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),vt=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(E.a)(this,Object(v.a)(t).call(this,e))).changeHandler=function(e,t){a.setState(Object(N.a)({},e,t))},a.submitHandler=function(){a.props.signIn(a.state.email,a.state.password)},a.state={email:"",password:""},a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.signIn,e.user),a=(e.match,this.state);a.email,a.password;return t&&t.loggedIn?r.a.createElement(s.a,{to:"/admin"}):r.a.createElement(P.a,{component:"main",maxWidth:"xs"},r.a.createElement(Me.a,null),r.a.createElement(yt,{changeHandler:this.changeHandler,submitHandler:this.submitHandler,failed:t.loginFailed}),r.a.createElement(ht.a,{mt:8},r.a.createElement(bt,null)))}}]),t}(r.a.Component),yt=function(e){var t=e.changeHandler,a=e.submitHandler,n=e.failed,o=Et();return r.a.createElement("div",{className:o.paper},r.a.createElement(ut.a,{className:o.avatar},r.a.createElement(gt.a,null)),r.a.createElement(G.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:o.form,onSubmit:function(e){e.preventDefault(),a()}},r.a.createElement(re.a,{error:n,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"off",autoFocus:!0,onChange:function(e){return t("email",e.target.value)}}),r.a.createElement(re.a,{error:n,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"off",onChange:function(e){return t("password",e.target.value)}}),r.a.createElement(pt.a,{control:r.a.createElement(dt.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(J.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit},"Sign In"),r.a.createElement(S.a,{container:!0},r.a.createElement(S.a,{item:!0,xs:!0},r.a.createElement(Pe.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(S.a,{item:!0},r.a.createElement(Pe.a,{href:"#",variant:"body2"},"Don't have an account? Sign Up")))))},Ot=Object(c.b)((function(e){return{user:e.Admin.user}}),(function(e){return{signIn:function(t,a){console.log("signing in"),e({type:Dt,payload:{email:t,password:a}})}}}))(vt),jt=Object(c.b)((function(e){return{user:e.Admin.user,title:e.Admin.title}}))((function(e){console.log("Admin",e);var t=e.routes.map((function(t,a){return r.a.createElement(s.b,{exact:t.path===e.match.path+"/",path:t.path,key:t.path,component:t.component,title:t.title})}));if(!e.user.loggedIn&&e.location.pathname!==e.match.path+"/login")return r.a.createElement(s.a,{to:e.match.path+"/login"});if(e.location.pathname!==e.match.path+"/login")var a=r.a.createElement(mt,e,t);else a="";return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path+"/login",component:Ot}),a)}));function wt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function qt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wt(a,!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Dt="Admin/SignIn",Nt="Admin/SetTitle",xt={title:"Dashboard"},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loggedIn:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Dt:var a=t.payload;return"admin"===a.email&&"123"===a.password?Object.assign({},e,qt({},t.payload,{loggedIn:!0})):qt({},e,{loginFailed:!0});default:return e}},kt=w("Admin","/admin",jt,(function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,n=arguments.length>1?arguments[1]:void 0;return{Dashboard:Ie(a.Dashboard,n),Request:xe(a.Request,n),user:Rt(a.user,n),title:(e=a.title,t=n,t.type===Nt?t.payload:e)}}),{Request:Re,Dashboard:Te}),Pt=a(215),St=a(216),Ft=a(217),Ct=(a(134),function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(E.a)(this,Object(v.a)(t).call(this,e))).validateField=function(e){var t=e.name,n=e.value,r=a.state.errors;switch(t){case"name":r.name=n?"":"empty";break;case"email":RegExp(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i).test(n)?r.email="":r.email="invalid";break;case"theme":r.theme=n?"":"empty";case"message":r.message=n?"":"empty"}a.setState({errors:r})},a.submit=function(e){var t=a.props,n=t.name,r=t.email,o=t.theme,l=t.message,i=t.submitForm,c=t.requestId,s=a.state.errors;n||(s.name="empty"),r||(s.email="empty"),o||(s.theme="empty"),l||(s.message="empty"),s.name||s.email||s.theme||s.message?e.preventDefault():i({name:n,email:r,theme:o.name,message:l,id:c}).then((function(e){"success"===e.result&&a.setState({redirect:"/"})})),a.setState({errors:s})},a.resetForm=function(){a.props.resetForm(),console.log("resetting"),a.inputName.value="",a.inputEmail.value="",a.inputMessage.value=""},a.state={errors:{name:"",email:"",message:"",theme:""},formIsReady:!1,redirect:""},a.setInputNameRef=function(e){a.inputName=e},a.setInputEmailRef=function(e){a.inputEmail=e},a.setInputMessageRef=function(e){a.inputMessage=e},a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.themes,a=e.themesMenuOpened,n=e.theme,o=e.name,l=e.email,i=e.message,c=e.toggleThemesMenu,m=e.selectTheme,u=e.inputName,p=e.inputMail,d=e.inputMessage,h=e.submitting,f=(e.submitted,e.requestId,this.state),g=f.errors,b=f.redirect;return b?r.a.createElement(s.a,{to:b}):r.a.createElement("div",{className:"form-page"},r.a.createElement("div",{className:"form-card"},r.a.createElement(Pt.a,null,r.a.createElement(R.a,{to:"/"},r.a.createElement(St.a,{close:!0}))),r.a.createElement("div",{className:"form-card-body"},r.a.createElement("form",null,r.a.createElement("h2",{className:"form-title"},"\u0424\u043e\u0440\u043c\u0430 \u0434\u043b\u044f \u0442\u0435\u0431\u044f"),r.a.createElement(Tt,{changeHandler:u,value:o,placeholder:"\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u044c\u0442\u0435\u0441\u044c \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430",name:"name",validator:this.validateField,error:g.name,setRef:this.setInputNameRef}),r.a.createElement(Tt,{changeHandler:p,value:l,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 e-mail",name:"email",cl:"mt-2",validator:this.validateField,error:g.email,setRef:this.setInputEmailRef}),r.a.createElement(Mt,{themes:t,opened:a,toggle:c,select:m,theme:n,error:g.theme,validator:this.validateField}),r.a.createElement(Ht,{changeHandler:d,value:i,validator:this.validateField,error:g.message,setRef:this.setInputMessageRef}),r.a.createElement("div",{className:"form-footer mt-2"},r.a.createElement(St.a,{className:"button reset-button",onClick:this.resetForm},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"),r.a.createElement(It,{onClick:this.submit,loading:h}))))))}}]),t}(r.a.Component)),It=function(e){var t=e.onClick,a=e.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(St.a,{className:"button ml-auto",onClick:t,disabled:a},a?r.a.createElement(Ft.a,{className:"button-progress",size:"sm"}):"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))};function Tt(e){var t=e.changeHandler,a=e.value,n=e.placeholder,o=e.name,l=e.cl,i=e.validator,c=e.error,s=e.setRef;if(a)var m=r.a.createElement("span",{className:"placeholder"},n);return r.a.createElement("div",{className:l+" input-box "+(a?"filled ":"")+(c?"with-error ":"")},m,r.a.createElement("input",{ref:s,name:o,type:"text",placeholder:n,onFocus:function(e){e.target.placeholder="",console.log(e.target)},onBlur:function(e){e.target.placeholder=n,t(e.target.value),i(e.target)},defaultValue:a}))}function Mt(e){var t=e.themes,a=e.opened,n=e.toggle,o=e.select,l=e.theme,i=e.validator,c=e.error,s=function(e,t){o(e),i(t)};if(a)var m=t.map((function(e,t){return r.a.createElement(Bt,{key:t,theme:e,select:s})})),u=r.a.createElement("div",{className:"custom-select-dropdown"},m);else u="";return r.a.createElement("div",{className:"select-box mt-2"},r.a.createElement("div",{className:"input-box "+(c?"with-error ":"")+(l?"filled ":"")},r.a.createElement(At,{opened:a,toggle:n,theme:l}),u))}function At(e){var t=e.opened,a=e.toggle,n=e.theme;if(n&&n.value)var o=r.a.createElement("div",{className:"selected-item"},r.a.createElement("span",{className:"placeholder"},"\u0422\u0435\u043c\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"),n.name);else o="\u0422\u0435\u043c\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f";return r.a.createElement("div",{className:"custom-select-area "+(t?"open":""),onClick:a},o)}function Bt(e){var t=e.theme,a=e.select,n={name:"theme",value:t.value};return r.a.createElement("div",{className:"custom-select-option",value:t.value,onClick:function(e){return a(t.value,n)}},t.name)}function Ht(e){var t=e.changeHandler,a=e.value,n=e.validator,o=e.error,l=e.setRef;return r.a.createElement("div",{className:"input-box mt-2 "+(o?"with-error ":"")+(a?"filled ":"")},r.a.createElement("textarea",{ref:l,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",rows:"4",onFocus:function(e){e.target.placeholder=""},onBlur:function(e){e.target.placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",t(e.target.value),n(e.target)},name:"message",defaultValue:a}))}var Wt,Lt=Object(c.b)((function(e){return e.Form}),(function(e){return{toggleThemesMenu:function(){e({type:zt})},selectTheme:function(t){e({type:_t,value:t})},inputName:function(t){e({type:Ut,name:t})},inputMail:function(t){e({type:Vt,email:t})},inputMessage:function(t){e({type:Yt,message:t})},resetForm:function(){e({type:Gt})},submitForm:function(t){return e({type:$t}),console.log("submitting",t),fetch("/api/request/store",{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){return e({type:Kt,payload:t||{result:"error",data:{}}}),t}))}}}))(Ct),Jt={themes:[{name:"\u0422\u0435\u043c\u0430 1",value:1},{name:"\u0422\u0435\u043c\u0430 2",value:2},{name:"\u0422\u0435\u043c\u0430 3",value:3},{name:"\u0422\u0435\u043c\u0430 4",value:4}],theme:"",message:"",name:"",email:"",themesMenuOpened:!1,submitted:!1,submitting:!1,requestId:""},_t="Form/SelectTheme",zt="Form/ToggleThemesMenu",Ut="Form/InputName",Vt="Form/InputEmail",Yt="Form/InputMessage",Gt="Form/ResetForm",$t="Form/SubmitFormReq",Kt="Form/SubmitFormRes",Xt={Profile:D,Admin:kt,Form:w("\u0424\u043e\u0440\u043c\u0430","/form",(function(e){return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path,component:Lt}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/edit",component:Lt}))}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t:var a={};return e.themes.map((function(e,n){e.value==t.value&&(a=e)})),Object.assign({},e,{theme:a,themesMenuOpened:!1});case zt:return Object.assign({},e,{themesMenuOpened:!e.themesMenuOpened});case Ut:return Object.assign({},e,{name:t.name});case Vt:return Object.assign({},e,{email:t.email});case Yt:return Object.assign({},e,{message:t.message});case Gt:return Object.assign({},e,{name:"",email:"",theme:"",message:""});case $t:return Object.assign({},e,{submitting:!0});case Kt:return Object.assign({},e,{requestId:t.payload.data._id,submitted:!0,submitting:!1});default:return e}}))},Qt=(Wt=Object(h.c)(function(e){for(var t={},a=q(e),n=0;n<a.length;n++){var r=a[n].reducer;if("function"!==typeof r)throw new Error("Module "+n+" does not define reducer!");t[a[n].MODULE]=r}return t}(Xt)),Object(h.d)(Wt,Object(h.a)(Object(f.createLogger)()))),Zt=a(218),ea=a(219),ta=function(e){function t(e){return Object(g.a)(this,t),Object(E.a)(this,Object(v.a)(t).call(this,e))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){console.log("main page",this.props);var e=this.props,t=e.submitted,a=e.name,n=e.theme,o=e.email,l=e.message;if(t)var i=r.a.createElement(R.a,{to:"/form/edit"},r.a.createElement(St.a,{className:"button"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443")),c=r.a.createElement(aa,{name:a,email:o,theme:n,message:l});else i=r.a.createElement(R.a,{to:"/form"},r.a.createElement(St.a,{className:"button"},"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443")),c=r.a.createElement("p",null,"\u0424\u043e\u0440\u043c\u0430 \u043f\u043e\u043a\u0430 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430.");return r.a.createElement(Zt.a,null,r.a.createElement(ea.a,{xs:"12"},r.a.createElement("div",{className:"main-page"},r.a.createElement("p",null,"Form data:"),c,i,r.a.createElement(R.a,{to:"/admin"},r.a.createElement(St.a,{className:"button ml-2",color:"info"},"\u041a\u0430\u0431\u0438\u043d\u0435\u0442")))))}}]),t}(r.a.Component);function aa(e){var t=e.name,a=e.email,n=e.theme,o=e.message;return r.a.createElement("div",{className:"form-data"},r.a.createElement("p",null,"\u0418\u043c\u044f: ",r.a.createElement("span",{className:"form-value"},t)),r.a.createElement("p",null,"e-mail: ",r.a.createElement("span",{className:"form-value"},a)),r.a.createElement("p",null,"\u0422\u0435\u043c\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f: ",r.a.createElement("span",{className:"form-value"},n.name)),r.a.createElement("p",null,"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f: ",r.a.createElement("span",{className:"form-value"},o)))}var na=Object(c.b)((function(e){return{submitted:e.Form.submitted,name:e.Form.name,email:e.Form.email,theme:e.Form.theme,message:e.Form.message}}))(ta),ra=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f";return[{path:"/",title:r,component:a,routes:q(e).map((function(e){if(console.log("x",e),!e.component)throw new Error("Component for module "+e+" is not defined");var a={path:e.path,title:e.title,component:e.component,onEnter:e.onEnter?function(a){e.onEnter(a,t.dispatch)}:null};return e.children&&(a.routes=Object.keys(e.children).map((function(a){var n=e.children[a];if(!n.component)throw new Error("Component for module "+e+"/"+a+" is not defined");return{path:e.path+n.path,title:n.title,component:n.component,onEnter:n.onEnter?function(e){n.onEnter(e,t.dispatch)}:null}}))),a}))}]}(Xt,Qt,(function(e){console.log("App",e);var t=e.routes.map((function(e,t){return e.routes&&e.routes.length?r.a.createElement(s.b,{path:e.path,key:e.path,render:function(t){return r.a.createElement(e.component,Object.assign({},t,{title:e.title,routes:e.routes}))}}):r.a.createElement(s.b,{path:e.path,key:e.path,component:e.component})}));return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path,component:na}),t)}),(function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Home"),e.children)}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));console.log("routes",ra),console.log("store",Qt),l.a.render(r.a.createElement(i.AppContainer,null,r.a.createElement(m,{store:Qt,history:d,routes:ra})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[121,1,2]]]);
//# sourceMappingURL=main.c5ab45b8.chunk.js.map