(this["webpackJsonpreact-cms"]=this["webpackJsonpreact-cms"]||[]).push([[0],{173:function(e,t,a){e.exports=a(187)},179:function(e,t,a){},187:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),i=a.n(o),c=a(136),l=(a(178),a(179),a(16)),s=a(49),u=function(e){return console.log("Roots",e),console.log("state",e.store.getState()),r.a.createElement(l.a,{store:e.store},r.a.createElement(s.c,{history:e.history},e.routes.map((function(e,t){return r.a.createElement(s.b,{key:t,path:e.path,render:function(t){return r.a.createElement(e.component,Object.assign({},t,{routes:e.routes,title:e.title}))}})}))))},p=a(23),m=Object(p.a)();m.listen((function(e){console.log("history is listening: "+e)}));var d=m,g=a(62),h=a(122),f=a(20),b=a(17),y=a(26),E=a(27),O=a(30),v=function(e){function t(e){return Object(f.a)(this,t),Object(y.a)(this,Object(E.a)(t).call(this,e))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){console.log("Profile",this.props);var e=this.props,t=e.name;e.match;return r.a.createElement("div",null,r.a.createElement("h2",null,"\u041f\u0440\u0438\u0432\u0435\u0442, ",t))}}]),t}(r.a.Component),j=Object(l.b)((function(e){return e.Profile}))(v),x=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return{title:e,path:t,component:a,reducer:n,onEnter:o,children:r}},w=function(e){return Object.keys(e).map((function(t){var a=Array.isArray(e[t])?e[t]:[e[t]];return a.forEach((function(e){return e.MODULE=t})),a})).reduce((function(e,t){return e.concat(t)}))},S=x("\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442","/profile",j,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"\u0416\u0430\u0432\u043b\u043e\u043d\u0431\u0435\u043a"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Profile/SetName":return{name:t.name};default:return e}})),q=a(7),D=a(31),P=a(2),k=a(14),C=a(126),R=a(286),N=a(287),A=a(298),I=a(279),F=a(281),T=a(282),H=a(300),B=a(292),z=a(299),W=a(296),M=a(297),L=a(283),_=a(130),J=a.n(_),U=a(131),G=a.n(U),V=a(295),Y=a(285),K=a(288),X=a(289),$=a(290),Q=a(316),Z=a(315),ee=a(39);var te=a(3),ae=a(201),ne=a(70),re=a(140),oe=a(125),ie=a.n(oe),ce=Object(ae.a)((function(e){return{root:{borderRadius:"4px",alignItems:"center",padding:e.spacing(1),display:"flex",flexBasis:420},icon:{marginRight:e.spacing(1),color:e.palette.text.secondary},input:{flexGrow:1,fontSize:"14px",lineHeight:"16px",letterSpacing:"-0.05px"}}})),le=function(e){var t=e.className,a=e.onChange,n=e.style,o=Object(P.a)(e,["className","onChange","style"]),i=ce();return r.a.createElement(ne.a,Object.assign({},o,{className:Object(te.a)(i.root,t),style:n}),r.a.createElement(ie.a,{className:i.icon}),r.a.createElement(re.a,Object.assign({},o,{className:i.input,disableUnderline:!0,onChange:a})))},se=function(e){return function(t){return Object(l.b)(null,(function(e){return{setTitle:function(t){e({type:Gt,payload:t})}}}))((function(a){return a.setTitle(t),r.a.createElement(e,null)}))}};function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var pe=Object(C.a)((function(e){return{seeMore:{marginTop:e.spacing(3)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{display:"flex",overflow:"auto",flexDirection:"column"},cardContent:{padding:0},loader:{margin:"auto"},addButton:{height:"100%",float:"right"}}}));function me(e){var t=e.onClose,a=e.open,n=e.deleteId,o=Object(P.a)(e,["onClose","open","deleteId"]);return r.a.createElement(I.a,Object.assign({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:a},o),r.a.createElement(F.a,{dividers:!0},"Are you sure to delete this item? You will not be able to recover this"),r.a.createElement(T.a,null,r.a.createElement(L.a,{autoFocus:!0,onClick:function(e){return t("cancel")},color:"primary"},"Cancel"),r.a.createElement(L.a,{onClick:function(e){return t("ok",n)},color:"primary"},"Ok")))}var de=function(e){var t=pe(),a=e.header?r.a.createElement(Y.a,{title:e.header}):"",o=Object(n.useState)(10),i=Object(D.a)(o,2),c=i[0],l=i[1],s=Object(n.useState)(0),u=Object(D.a)(s,2),p=u[0],m=u[1];return r.a.createElement(R.a,{maxWidth:"lg",className:t.container},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(le,{placeholder:"search employee"})),r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(k.a,{to:e.path+"/add"},r.a.createElement(L.a,{className:t.addButton,color:"primary",variant:"contained"},"Add employee"))),r.a.createElement(N.a,{item:!0,xs:12},r.a.createElement(K.a,{className:t.paper},r.a.createElement(X.a,{className:t.cardContent},a,r.a.createElement(ge,e)),r.a.createElement($.a,{className:t.actions},r.a.createElement(Q.a,{component:"div",count:e.requests?e.requests.length:0,onChangePage:function(e,t){m(t)},onChangeRowsPerPage:function(e){l(e.target.value)},page:p,rowsPerPage:c,rowsPerPageOptions:[5,10,25]}))))))},ge=function(e){var t=e.requests,a=e.showDeleteDialog,o=e.path,i=e.loading,c=pe(),l=Object(n.useState)([]),s=Object(D.a)(l,2),u=s[0],p=s[1];if(!t||i)return r.a.createElement(V.a,{className:c.loader});var m=t.map((function(e,t){return r.a.createElement(W.a,{key:t},r.a.createElement(B.a,null,r.a.createElement(Z.a,{checked:-1!==u.indexOf(e._id),color:"primary",onChange:function(t){return function(e,t){var a=u.indexOf(t),n=[];-1===a?n=n.concat(u,t):0===a?n=n.concat(u.slice(1)):a===u.length-1?n=n.concat(u.slice(0,-1)):a>0&&(n=n.concat(u.slice(0,a),u.slice(a+1))),p(n)}(0,e._id)},value:"true"})),r.a.createElement(B.a,null,e.name),r.a.createElement(B.a,null,e.email),r.a.createElement(B.a,null,e.address),r.a.createElement(B.a,null,e.message),r.a.createElement(B.a,{align:"right"},r.a.createElement(k.a,{to:o+"/edit/"+e._id},r.a.createElement(M.a,{color:"secondary",size:"small","aria-label":"Edit"},r.a.createElement(J.a,null))),r.a.createElement(M.a,{size:"small","aria-label":"Delete",className:"ml-2",onClick:function(t){return a(e._id)}},r.a.createElement(G.a,null))))}));return r.a.createElement(A.a,{size:"small"},r.a.createElement(z.a,null,r.a.createElement(W.a,null,r.a.createElement(B.a,null,r.a.createElement(Z.a,{checked:u.length===t.length,color:"primary",indeterminate:u.length>0&&u.length<t.length,onChange:function(e){var a,n=t;a=e.target.checked?n.map((function(e){return e._id})):[],p(a)}})),r.a.createElement(B.a,null,"Name"),r.a.createElement(B.a,null,"Email"),r.a.createElement(B.a,null,"Address"),r.a.createElement(B.a,null,"Description"),r.a.createElement(B.a,{align:"right"},"Action"))),r.a.createElement(H.a,null,m))},he=function(e){function t(e){return Object(f.a)(this,t),Object(y.a)(this,Object(E.a)(t).call(this,e))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.requests,a=e.loadRequests;t&&t.length||a()}},{key:"render",value:function(){console.log("Request List",this.props);var e=this.props,t=e.match,a=e.requests,n=e.loadingRequests,o=e.showDeleteDialog,i=e.closeDeleteDialog,c=e.deleteDialogOpen,l=e.deleteId,s=e.header;return r.a.createElement(r.a.Fragment,null,r.a.createElement(de,{requests:a,loading:n,path:t?t.path:"/admin/request",showDeleteDialog:o,header:s}),r.a.createElement(me,{id:"ringtone-menu",deleteId:l,keepMounted:!0,open:c,onClose:i}))}}]),t}(r.a.Component),fe=Object(l.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(a,!0).forEach((function(t){Object(q.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.Admin.Request)}),(function(e){return{loadRequests:function(){return e({type:ke}),fetch("/api/request/get").then((function(e){return e.ok?e.json():[]})).then((function(t){e({type:Ce,payload:{requests:t}})}))},showDeleteDialog:function(t){e({type:Fe,payload:{deleteId:t}})},closeDeleteDialog:function(t,a){if(e({type:Te}),console.log("close",t),"ok"===t&&a){var n={id:a};return fetch("/api/request/delete",{method:"POST",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){t.result&&"success"===t.result&&e({type:He,payload:{request:t.data}})}))}}}}))(he),be=se(fe)("Employees"),ye=a(301),Ee=(a(293),a(197),a(196),a(202),a(302)),Oe=a(67),ve=a.n(Oe),je=Object(C.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},textField:{width:"100%"},themesSelect:{width:"100%"},button:{float:"right"}}}));function xe(e){var t=e.request,a=e.match,n=(e.themes,e.update),o=e.action,i=e.saving,c=je(),l=r.a.useState(""),u=Object(D.a)(l,2),p=u[0],m=u[1];return p?(console.log("redirecting",p),r.a.createElement(s.a,{to:p})):r.a.createElement(R.a,{maxWidth:"lg",className:c.container},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(k.a,{to:"/admin/request"},r.a.createElement(L.a,{variant:"contained",color:"primary"},r.a.createElement(ve.a,null)," Back to list"))),r.a.createElement(N.a,{item:!0,xs:12},r.a.createElement(ne.a,{className:c.paper},r.a.createElement("form",{onSubmit:function(e){var t=e.target.elements,r={name:t.name.value,email:t.email.value,address:t.address.value,message:t.message.value};"edit"===o&&(r.id=a.params.requestId),n(r).then((function(e){"success"===e.result&&m("/admin/request")})),e.preventDefault()}},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,sm:6},r.a.createElement(ye.a,{id:"outlined-basic",className:c.textField,label:"Name",margin:"normal",variant:"outlined",name:"name",defaultValue:t.name,required:!0})),r.a.createElement(N.a,{item:!0,sm:6},r.a.createElement(ye.a,{id:"outlined-basic",className:c.textField,label:"Email",margin:"normal",variant:"outlined",name:"email",defaultValue:t.email})),r.a.createElement(N.a,{item:!0,sm:12},r.a.createElement(ye.a,{id:"outlined-basic",className:c.textField,label:"Address",margin:"normal",variant:"outlined",name:"address",defaultValue:t.address})),r.a.createElement(N.a,{item:!0,sm:12},r.a.createElement(ye.a,{id:"outlined-multiline-static",label:"Description",multiline:!0,rows:"4",defaultValue:t.message,className:c.textField,margin:"normal",variant:"outlined",name:"message"})),r.a.createElement(N.a,{item:!0,sm:12},r.a.createElement(L.a,{type:"submit",variant:"contained",color:"primary",className:c.button,disabled:i},i?r.a.createElement(V.a,{size:"1rem"}):"Save"))))))))}var we=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(E.a)(t).call(this,e))).state={action:""},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loadRequest,a=e.match,n=e.setTitle;a.params.requestId?(this.setState({action:"edit"}),n("Edit employee"),t(a.params.requestId)):(this.setState({action:"add"}),n("Add employee"))}},{key:"render",value:function(){console.log("Edit Request",this.props);var e=this.props,t=e.match,a=e.request,n=e.themes,o=e.update,i=e.loadingRequest,c=e.saving,l=this.state.action;return i?r.a.createElement(Ee.a,null):r.a.createElement(xe,{action:l,request:"edit"==l?a:{},match:t,themes:n,update:o,saving:c})}}]),t}(r.a.Component),Se=Object(l.b)((function(e){var t=e.Admin.Request;return{requests:t.requests,request:t.request,loadingRequest:t.loadingRequest,saving:t.saving}}),(function(e){return{loadRequest:function(t){return e({type:Re}),fetch("/api/request/get?id="+t).then((function(e){return e.ok?e.json():{}})).then((function(t){e({type:Ne,payload:{request:t}})}))},setTitle:function(t){e({type:Gt,payload:t})},update:function(t){return e({type:Ae}),fetch("/api/request/store",{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){return e({type:Ie,payload:{request:t.data,result:t.result}}),t}))}}}))(we);function qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function De(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qe(a,!0).forEach((function(t){Object(q.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Pe="Admin/Request/",ke=Pe+"LoadRequestsReq",Ce=Pe+"LoadRequestsRes",Re=Pe+"LoadRequestReq",Ne=Pe+"LoadRequestRes",Ae=Pe+"SaveReq",Ie=Pe+"SaveRes",Fe=Pe+"ShowDeleteDialog",Te=Pe+"CloseDeleteDialog",He=Pe+"DeleteRes",Be={requests:[],loadingRequests:!1,request:{},loadingRequest:!1,deleteDialogOpen:!1,deleteId:"",saving:!1},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return De({},e,{loadingRequest:!0});case Ne:return De({},e,{request:a=t.payload.request,loadingRequest:!1});case ke:return De({},e,{loadingRequests:!0});case Ce:return De({},e,{loadingRequests:!1,requests:t.payload.requests});case Ae:return De({},e,{saving:!0});case Ie:var a=t.payload.request,n=!1,r=e.requests.map((function(e,t){return e&&e._id===a._id?(n=!0,a):e}));return n||r.push(a),De({},e,{requests:r,saving:!1});case Fe:return De({},e,{deleteDialogOpen:!0,deleteId:t.payload.deleteId});case Te:return De({},e,{deleteDialogOpen:!1});case He:a=t.payload.request;return De({},e,{requests:e.requests.filter((function(e){return e._id!==a._id}))});default:return e}},We=x("Requests","/request",(function(e){return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path,component:be}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/edit/:requestId",component:Se}),r.a.createElement(s.b,{exact:!0,path:e.match.path+"/add",component:Se}))}),ze),Me=a(303);function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var _e=Object(C.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"}}}));var Je=se(Object(l.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(a,!0).forEach((function(t){Object(q.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.Dashboard)}),(function(e){return{}}))((function(e){var t=_e();return Object(te.a)(t.paper,t.fixedHeight),console.log("Dashboard",e),r.a.createElement(r.a.Fragment,null,r.a.createElement(fe,{employees:e.employees,header:"Employees"}),r.a.createElement(R.a,{maxWidth:"lg",className:t.container},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:12},r.a.createElement(ne.a,{className:t.paper},"Some Dashboard Content")))))})))("Dashboard"),Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"DEFAULT"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Dashboard/FirstAction":return{name:"Javlonbek"};default:return e}},Ge=x("\u0414\u0435\u0448\u0431\u043e\u0430\u0440\u0434","/",Je,Ue),Ve=a(313),Ye=a(306),Ke=a(309),Xe=a(307),$e=a(294),Qe=a(195),Ze=a(310),et=a(291),tt=a(308),at=a(96),nt=a.n(at),rt=a(97),ot=a.n(rt),it=a(190),ct=a(304),lt=a(305),st=a(133),ut=a.n(st),pt=a(134),mt=a.n(pt),dt=a(132),gt=a.n(dt);function ht(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ft(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ht(a,!0).forEach((function(t){Object(q.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ht(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function bt(){return r.a.createElement(ee.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(k.a,{color:"inherit",to:"/"},"RJ")," ",(new Date).getFullYear(),".")}var yt=Object(C.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:ft({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(q.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}})),Et=function(e){var t=e.linkPrefix;return r.a.createElement("div",null,r.a.createElement(it.a,{button:!0},r.a.createElement(ct.a,null,r.a.createElement(gt.a,null)),r.a.createElement(k.a,{to:"/"},r.a.createElement(lt.a,{primary:"Home"}))),r.a.createElement(it.a,{button:!0},r.a.createElement(ct.a,null,r.a.createElement(ut.a,null)),r.a.createElement(k.a,{to:t+""},r.a.createElement(lt.a,{primary:"Dashboard"}))),r.a.createElement(it.a,{button:!0},r.a.createElement(ct.a,null,r.a.createElement(mt.a,null)),r.a.createElement(k.a,{to:t+"/request"},r.a.createElement(lt.a,{primary:"Employees"}))))};var Ot=Object(l.b)((function(e){return{title:e.Admin.title}}))((function(e){var t=yt(),a=r.a.useState(!0),n=Object(D.a)(a,2),o=n[0],i=n[1];return Object(te.a)(t.paper,t.fixedHeight),console.log("Layout",e),r.a.createElement("div",{className:t.root},r.a.createElement(Ye.a,null),r.a.createElement(Xe.a,{position:"absolute",className:Object(te.a)(t.appBar,o&&t.appBarShift)},r.a.createElement($e.a,{className:t.toolbar},r.a.createElement(et.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){i(!0)},className:Object(te.a)(t.menuButton,o&&t.menuButtonHidden)},r.a.createElement(nt.a,null)),r.a.createElement(ee.a,{component:"h1",variant:"h4",color:"inherit",noWrap:!0,className:t.title},e.title),r.a.createElement(et.a,{color:"inherit"},r.a.createElement(tt.a,{badgeContent:0,color:"secondary"},r.a.createElement(ot.a,null))))),r.a.createElement(Ke.a,{variant:"permanent",classes:{paper:Object(te.a)(t.drawerPaper,!o&&t.drawerPaperClose)},open:o},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(et.a,{onClick:function(){i(!1)}},r.a.createElement(ve.a,null))),r.a.createElement(Ze.a,null),r.a.createElement(Qe.a,null,r.a.createElement(Et,{linkPrefix:e.match.path}))),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),e.children,r.a.createElement(bt,null)))})),vt=a(311),jt=a(312),xt=a(314),wt=a(135),St=a.n(wt);function qt(){return r.a.createElement(ee.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Me.a,{color:"inherit",href:"https://material-ui.com/"},"RJ")," ",(new Date).getFullYear(),".")}var Dt=Object(C.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Pt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(E.a)(t).call(this,e))).changeHandler=function(e,t){a.setState(Object(q.a)({},e,t))},a.submitHandler=function(){a.props.signIn(a.state.email,a.state.password)},a.state={email:"",password:""},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.signIn,e.user),a=(e.match,this.state);a.email,a.password;return t&&t.loggedIn?r.a.createElement(s.a,{to:"/admin"}):r.a.createElement(R.a,{component:"main",maxWidth:"xs"},r.a.createElement(Ye.a,null),r.a.createElement(kt,{changeHandler:this.changeHandler,submitHandler:this.submitHandler,failed:t.loginFailed}),r.a.createElement(xt.a,{mt:8},r.a.createElement(qt,null)))}}]),t}(r.a.Component),kt=function(e){var t=e.changeHandler,a=e.submitHandler,n=e.failed,o=Dt();return r.a.createElement("div",{className:o.paper},r.a.createElement(vt.a,{className:o.avatar},r.a.createElement(St.a,null)),r.a.createElement(ee.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:o.form,onSubmit:function(e){e.preventDefault(),a()}},r.a.createElement(ye.a,{error:n,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"username",autoComplete:"off",autoFocus:!0,onChange:function(e){return t("email",e.target.value)}}),r.a.createElement(ye.a,{error:n,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"off",onChange:function(e){return t("password",e.target.value)}}),r.a.createElement(jt.a,{control:r.a.createElement(Z.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(L.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit},"Sign In"),r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{item:!0,xs:!0},r.a.createElement(Me.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(N.a,{item:!0},r.a.createElement(Me.a,{href:"#",variant:"body2"},"Don't have an account? Sign Up")))))},Ct=Object(l.b)((function(e){return{user:e.Admin.user}}),(function(e){return{signIn:function(t,a){return console.log("signing in",t+a),e({type:Jt}),fetch("/admin/login",{method:"POST",body:JSON.stringify({username:t,password:a}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():{}})).then((function(t){e({type:Ut,payload:t.user}),t.result}))}}}))(Pt);function Rt(e){var t=function(t){function a(e){var t;return Object(f.a)(this,a),(t=Object(y.a)(this,Object(E.a)(a).call(this,e))).state={redirect:!1,loading:!0},t}return Object(O.a)(a,t),Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("withAuth mounted"),this.props.getActiveUser().then((function(t){console.log("active user",t),e.setState({redirect:!t,loading:!1})}))}},{key:"render",value:function(){console.log("withAuth",this.props);var t=this.state,a=t.redirect,n=t.loading,o=this.props;return n?r.a.createElement(Ee.a,null):!o.user.loggedIn&&a?(console.log("redirecting",o.match.path+"/login"),r.a.createElement(s.a,{to:"/admin/login"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(e,this.props))}}]),a}(n.Component);return Object(l.b)((function(e){return{user:e.Admin.user}}),(function(e){return{getActiveUser:function(){return e({type:Jt}),fetch("/api/user/active").then((function(e){return e.ok?e.json():{}})).then((function(t){return e({type:Ut,payload:t?t.user:{}}),t.user}))}}}))(t)}var Nt=a(137),At=a(9),It="#FFFFFF",Ft={black:"#000000",white:It,primary:{contrastText:It,dark:At.a.indigo[900],main:At.a.indigo[500],light:At.a.indigo[100]},secondary:{contrastText:It,dark:At.a.blue[900],main:At.a.blue.A400,light:At.a.blue.A400},success:{contrastText:It,dark:At.a.green[900],main:At.a.green[600],light:At.a.green[400]},info:{contrastText:It,dark:At.a.blue[900],main:At.a.blue[600],light:At.a.blue[400]},warning:{contrastText:It,dark:At.a.orange[900],main:At.a.orange[600],light:At.a.orange[400]},error:{contrastText:It,dark:At.a.red[900],main:At.a.red[600],light:At.a.red[400]},text:{primary:At.a.blueGrey[900],secondary:At.a.blueGrey[600],link:At.a.blue[600]},background:{default:"#F4F6F8",paper:It},icon:At.a.blueGrey[600],divider:At.a.grey[200]},Tt={h1:{color:Ft.text.primary,fontWeight:500,fontSize:"35px",letterSpacing:"-0.24px",lineHeight:"40px"},h2:{color:Ft.text.primary,fontWeight:500,fontSize:"29px",letterSpacing:"-0.24px",lineHeight:"32px"},h3:{color:Ft.text.primary,fontWeight:500,fontSize:"24px",letterSpacing:"-0.06px",lineHeight:"28px"},h4:{color:Ft.text.primary,fontWeight:500,fontSize:"20px",letterSpacing:"-0.06px",lineHeight:"24px"},h5:{color:Ft.text.primary,fontWeight:500,fontSize:"16px",letterSpacing:"-0.05px",lineHeight:"20px"},h6:{color:Ft.text.primary,fontWeight:500,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"20px"},subtitle1:{color:Ft.text.primary,fontSize:"16px",letterSpacing:"-0.05px",lineHeight:"25px"},subtitle2:{color:Ft.text.secondary,fontWeight:400,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"21px"},body1:{color:Ft.text.primary,fontSize:"15px",letterSpacing:"-0.05px",lineHeight:"21px"},body2:{color:Ft.text.secondary,fontSize:"13px",letterSpacing:"-0.04px",lineHeight:"18px"},button:{color:Ft.text.primary,fontSize:"14px"},caption:{color:Ft.text.secondary,fontSize:"11px",letterSpacing:"0.33px",lineHeight:"13px"},overline:{color:Ft.text.secondary,fontSize:"11px",fontWeight:500,letterSpacing:"0.33px",lineHeight:"13px",textTransform:"uppercase"}};function Ht(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Bt={MuiButton:{contained:{boxShadow:"0 1px 1px 0 rgba(0,0,0,0.14), 0 2px 1px -1px rgba(0,0,0,0.12), 0 1px 3px 0 rgba(0,0,0,0.20)",backgroundColor:"#FFFFFF"}},MuiIconButton:{root:{color:Ft.icon,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.03)"}}},MuiPaper:{elevation1:{boxShadow:"0 0 0 1px rgba(63,63,68,0.05), 0 1px 3px 0 rgba(63,63,68,0.15)"}},MuiTableCell:{root:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ht(a,!0).forEach((function(t){Object(q.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ht(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Tt.body1,{borderBottom:"1px solid ".concat(Ft.divider)})},MuiTableHead:{root:{backgroundColor:At.a.grey[50]}},MuiTypography:{gutterBottom:{marginBottom:8}}},zt=Object(Nt.a)({palette:Ft,typography:Tt,overrides:Bt,zIndex:{appBar:1200,drawer:1100}}),Wt=function(e){function t(e){return Object(f.a)(this,t),Object(y.a)(this,Object(E.a)(t).call(this,e))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props;if(console.log("Admin",e),e.location.pathname!==e.match.path+"/login")var t=e.routes.map((function(t,a){return r.a.createElement(s.b,{exact:t.path===e.match.path+"/",path:t.path,key:t.path,component:Rt(t.component),title:t.title})})),a=r.a.createElement(Ot,e,t);else a="";return r.a.createElement(Ve.a,{theme:zt},r.a.createElement(s.b,{exact:!0,path:e.match.path+"/login",component:Ct}),a)}}]),t}(r.a.Component);function Mt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Lt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Mt(a,!0).forEach((function(t){Object(q.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _t,Jt="Admin/SignInReq",Ut="Admin/SignInRes",Gt="Admin/SetTitle",Vt={title:"Dashboard"},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loggedIn:!1,authenticating:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jt:return Lt({},e,{authenticating:!0});case Ut:var a=t.payload;return a&&a.username?Lt({},e,{},t.payload,{loggedIn:!0,authenticating:!1}):Lt({},e,{loginFailed:!0,authenticating:!1,loggedIn:!1});default:return e}},Kt={Profile:S,Admin:x("Admin","/admin",Wt,(function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,n=arguments.length>1?arguments[1]:void 0;return{Dashboard:Ue(a.Dashboard,n),Request:ze(a.Request,n),user:Yt(a.user,n),title:(e=a.title,t=n,t.type===Gt?t.payload:e)}}),{Request:We,Dashboard:Ge})},Xt=(_t=Object(g.c)(function(e){for(var t={},a=w(e),n=0;n<a.length;n++){var r=a[n].reducer;if("function"!==typeof r)throw new Error("Module "+n+" does not define reducer!");t[a[n].MODULE]=r}return t}(Kt)),Object(g.d)(_t,Object(g.a)(Object(h.createLogger)()))),$t=function(e){return r.a.createElement(s.a,{to:"/admin"})},Qt=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f";return[{path:"/",title:r,component:a,routes:w(e).map((function(e){if(console.log("x",e),!e.component)throw new Error("Component for module "+e+" is not defined");var a={path:e.path,title:e.title,component:e.component,onEnter:e.onEnter?function(a){e.onEnter(a,t.dispatch)}:null};return e.children&&(a.routes=Object.keys(e.children).map((function(a){var n=e.children[a];if(!n.component)throw new Error("Component for module "+e+"/"+a+" is not defined");return{path:e.path+n.path,title:n.title,component:n.component,onEnter:n.onEnter?function(e){n.onEnter(e,t.dispatch)}:null}}))),a}))}]}(Kt,Xt,(function(e){console.log("App",e);var t=e.routes.map((function(e,t){return e.routes&&e.routes.length?r.a.createElement(s.b,{path:e.path,key:e.path,render:function(t){return r.a.createElement(e.component,Object.assign({},t,{title:e.title,routes:e.routes}))}}):r.a.createElement(s.b,{path:e.path,key:e.path,component:e.component})}));return r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:e.match.path,component:$t}),t)}),$t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));console.log("routes",Qt),console.log("store",Xt),i.a.render(r.a.createElement(c.AppContainer,null,r.a.createElement(u,{store:Xt,history:d,routes:Qt})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[173,1,2]]]);
//# sourceMappingURL=main.3457bf1c.chunk.js.map